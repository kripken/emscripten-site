
    
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>emscripten.h &mdash; Emscripten 3.1.32-git (dev) documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/emscripten.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Emscripten 3.1.32-git (dev) documentation" href="../../index.html"/>
        <link rel="up" title="API Reference" href="index.html"/>
        <link rel="next" title="html5.h" href="html5.h.html"/>
        <link rel="prev" title="API Reference" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">


<div class="grid-to-center-rtd-theme"> 
 
  <div class="wy-grid-for-nav">
  


    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <!-- <a href="../../index.html" class="fa fa-home"> Emscripten</a> -->
		<a href="../../index.html"> <img src="../..//_static/Emscripten_logo_full.png" alt="Logo" /> </a>
		
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">

		 
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introducing_emscripten/index.html">Introducing Emscripten</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introducing_emscripten/about_emscripten.html">About Emscripten</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introducing_emscripten/about_emscripten.html#emscripten-toolchain">Emscripten Toolchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introducing_emscripten/about_emscripten.html#porting-code-to-use-emscripten">Porting code to use Emscripten</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../introducing_emscripten/community.html">Community</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introducing_emscripten/community.html#get-in-touch">Get in touch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introducing_emscripten/community.html#report-a-bug">Report a bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introducing_emscripten/community.html#contribute">Contribute</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../introducing_emscripten/emscripten_license.html">Open Source License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introducing_emscripten/release_notes.html">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introducing_emscripten/Talks-and-Publications.html">Talks and Publications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introducing_emscripten/Talks-and-Publications.html#presentations">Presentations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introducing_emscripten/Talks-and-Publications.html#papers">Papers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introducing_emscripten/Talks-and-Publications.html#books">Books</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/downloads.html">Download and install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/downloads.html#installation-instructions-using-the-emsdk-recommended">Installation instructions using the emsdk (recommended)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/downloads.html#emsdk-install-targets">Emsdk install targets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/downloads.html#platform-specific-notes">Platform-specific notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/downloads.html#verifying-the-installation">Verifying the installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/downloads.html#updating-the-sdk">Updating the SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/downloads.html#uninstalling-the-emscripten-sdk">Uninstalling the Emscripten SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/downloads.html#using-the-docker-image">Using the Docker image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/downloads.html#installation-using-unofficial-packages">Installation using unofficial packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/Tutorial.html">Emscripten Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/Tutorial.html#first-things-first">First things first</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/Tutorial.html#verifying-emscripten">Verifying Emscripten</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/Tutorial.html#running-emscripten">Running Emscripten</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/Tutorial.html#generating-html">Generating HTML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/Tutorial.html#using-files">Using files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/Tutorial.html#optimizing-code">Optimizing code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/Tutorial.html#emscripten-test-suite-and-benchmarks">Emscripten Test Suite and Benchmarks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/Tutorial.html#general-tips-and-next-steps">General tips and next steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/test-suite.html">Emscripten Test Suite</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/test-suite.html#setting-up">Setting up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/test-suite.html#running-tests">Running tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/test-suite.html#skipping-tests">Skipping Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/test-suite.html#running-a-bunch-of-random-tests">Running a bunch of random tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/test-suite.html#important-tests">Important Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/test-suite.html#benchmarking">Benchmarking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/test-suite.html#debugging-test-failures">Debugging test failures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/bug_reports.html">Bug Reporting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/bug_reports.html#llvm-wasm-ld-clang-binaryen-bugs">LLVM, wasm-ld, clang, Binaryen bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/bug_reports.html#site-and-documentation-bugs">Site and documentation bugs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/FAQ.html">FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-do-i-compile-code">How do I compile code?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-do-i-get-multiple-errors-building-basic-code-and-the-tests">Why do I get multiple errors building basic code and the tests?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#i-tried-something-why-doesnt-it-work">I tried something: why doesn’t it work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#do-i-need-to-change-my-build-system-to-use-emscripten">Do I need to change my build system to use Emscripten?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-is-code-compilation-slow">Why is code compilation slow?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-does-my-code-run-slowly">Why does my code run slowly?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-is-my-compiled-code-big">Why is my compiled code big?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-does-compiling-code-that-works-on-another-machine-gives-me-errors">Why does compiling code that works on another machine gives me errors?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-can-i-reduce-startup-time">How can I reduce startup time?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing">How do I run a local webserver for testing / why does my program stall in “Downloading…” or “Preparing…”?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#what-is-no-webassembly-support-found-build-with-swasm-0-to-target-javascript-instead-or-no-native-wasm-support-detected">What is “No WebAssembly support found. Build with -sWASM=0 to target JavaScript instead” or “no native wasm support detected”?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-do-i-get-machine-type-must-be-wasm32-or-is-not-a-valid-input-file-during-linking">Why do I get <code class="docutils literal notranslate"><span class="pre">machine</span> <span class="pre">type</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">wasm32</span></code> or <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">input</span> <span class="pre">file</span></code> during linking?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-does-my-code-fail-to-compile-with-an-error-message-about-inline-assembly-or-text-asm">Why does my code fail to compile with an error message about inline assembly (or <code class="docutils literal notranslate"><span class="pre">{&quot;text&quot;:&quot;asm&quot;}</span></code>)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-does-my-html-app-hang">Why does my HTML app hang?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-do-i-run-an-event-loop">How do I run an event loop?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-doesn-t-my-sdl-app-work">Why doesn’t my SDL app work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-do-i-link-against-system-libraries-like-sdl-boost-etc">How do I link against system libraries like SDL, boost, etc.?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#what-are-my-options-for-audio-playback">What are my options for audio playback?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-can-my-compiled-program-access-files">How can my compiled program access files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-can-t-my-code-access-a-file-in-the-same-directory">Why can’t my code access a file in the same directory?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-can-i-tell-when-the-page-is-fully-loaded-and-it-is-safe-to-call-compiled-functions">How can I tell when the page is fully loaded and it is safe to call compiled functions?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#what-does-exiting-the-runtime-mean-why-don-t-atexit-s-run">What does “exiting the runtime” mean? Why don’t <code class="docutils literal notranslate"><span class="pre">atexit()s</span></code> run?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-do-functions-in-my-c-c-source-code-vanish-when-i-compile-to-javascript-and-or-i-get-no-functions-to-process">Why do functions in my C/C++ source code vanish when I compile to JavaScript, and/or I get <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">functions</span> <span class="pre">to</span> <span class="pre">process</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-is-the-file-system-api-is-not-available-when-i-build-with-closure">Why is the File System API is not available when I build with closure?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-does-my-code-break-and-gives-odd-errors-when-using-o2-closure-1">Why does my code break and gives odd errors when using <code class="docutils literal notranslate"><span class="pre">-O2</span> <span class="pre">--closure</span> <span class="pre">1</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-do-i-get-typeerror-module-something-is-not-a-function">Why do I get <code class="docutils literal notranslate"><span class="pre">TypeError:</span> <span class="pre">Module.someThing</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">function</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-does-runtime-no-longer-exist-why-do-i-get-an-error-trying-to-access-runtime-something">Why does <code class="docutils literal notranslate"><span class="pre">Runtime</span></code> no longer exist? Why do I get an error trying to access <code class="docutils literal notranslate"><span class="pre">Runtime.someThing</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-do-i-get-a-nameerror-or-a-problem-occurred-in-evaluating-content-after-a-s-when-i-use-a-s-option">Why do I get a <code class="docutils literal notranslate"><span class="pre">NameError</span></code> or <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">problem</span> <span class="pre">occurred</span> <span class="pre">in</span> <span class="pre">evaluating</span> <span class="pre">content</span> <span class="pre">after</span> <span class="pre">a</span> <span class="pre">&quot;-s&quot;</span></code> when I use a <code class="docutils literal notranslate"><span class="pre">-s</span></code> option?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-do-i-specify-s-options-in-a-cmake-project">How do I specify <code class="docutils literal notranslate"><span class="pre">-s</span></code> options in a CMake project?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-do-i-get-a-python-syntaxerror-invalid-syntax-on-file-or-on-a-string-starting-with-f">Why do I get a Python <code class="docutils literal notranslate"><span class="pre">SyntaxError:</span> <span class="pre">invalid</span> <span class="pre">syntax</span></code> on <code class="docutils literal notranslate"><span class="pre">file=..</span></code> or on a string starting with <code class="docutils literal notranslate"><span class="pre">f'..'</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-does-running-llvm-bitcode-generated-by-emcc-through-lli-break-with-errors-about-impure-ptr">Why does running LLVM bitcode generated by emcc through <strong>lli</strong> break with errors about <code class="docutils literal notranslate"><span class="pre">impure_ptr</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-do-i-get-a-stack-size-error-when-optimizing-rangeerror-maximum-call-stack-size-exceeded-or-similar">Why do I get a stack size error when optimizing: <code class="docutils literal notranslate"><span class="pre">RangeError:</span> <span class="pre">Maximum</span> <span class="pre">call</span> <span class="pre">stack</span> <span class="pre">size</span> <span class="pre">exceeded</span></code> or similar?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-do-i-get-error-cannot-compile-this-aggregate-va-arg-expression-yet-and-it-says-compiler-frontend-failed-to-generate-llvm-bitcode-halting-afterwards">Why do I get <code class="docutils literal notranslate"><span class="pre">error:</span> <span class="pre">cannot</span> <span class="pre">compile</span> <span class="pre">this</span> <span class="pre">aggregate</span> <span class="pre">va_arg</span> <span class="pre">expression</span> <span class="pre">yet</span></code> and it says <code class="docutils literal notranslate"><span class="pre">compiler</span> <span class="pre">frontend</span> <span class="pre">failed</span> <span class="pre">to</span> <span class="pre">generate</span> <span class="pre">LLVM</span> <span class="pre">bitcode,</span> <span class="pre">halting</span></code> afterwards?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#how-do-i-pass-int64-t-and-uint64-t-values-from-js-into-wasm-functions">How do I pass int64_t and uint64_t values from js into wasm functions?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#can-i-use-multiple-emscripten-compiled-programs-on-one-web-page">Can I use multiple Emscripten-compiled programs on one Web page?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#can-i-build-javascript-that-only-runs-on-the-web">Can I build JavaScript that only runs on the Web?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/FAQ.html#why-the-weird-name-for-the-project">Why the weird name for the project?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../compiling/index.html">Compiling and Running Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../compiling/Building-Projects.html">Building Projects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#integrating-with-a-build-system">Integrating with a build system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#emscripten-linker-output-files">Emscripten linker output files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#building-projects-with-optimizations">Building projects with optimizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#building-projects-with-debug-information">Building projects with debug information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#using-libraries">Using libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#emscripten-ports">Emscripten Ports</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#adding-more-ports">Adding more ports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#build-system-issues">Build system issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#build-system-self-execution">Build system self-execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#faux-dynamic-linking">Faux Dynamic Linking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#configure-may-run-checks-that-appear-to-fail">Configure may run checks that appear to fail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#archive-a-files">Archive (.a) files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#manually-using-emcc">Manually using emcc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#detecting-emscripten-in-preprocessor">Detecting Emscripten in Preprocessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#using-a-compiler-wrapper">Using a compiler wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#pkg-config">pkg-config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#examples-test-code">Examples / test code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiling/WebAssembly.html">Building to WebAssembly</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../compiling/WebAssembly.html#setup">Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../compiling/WebAssembly.html#backends">Backends</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/WebAssembly.html#trapping">Trapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/WebAssembly.html#compiler-output">Compiler output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/WebAssembly.html#testing-native-webassembly-in-browsers">Testing native WebAssembly in browsers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/WebAssembly.html#wasm-files-and-compilation"><code class="docutils literal notranslate"><span class="pre">.wasm</span></code> files and compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/WebAssembly.html#web-server-setup">Web server setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiling/Dynamic-Linking.html">Dynamic Linking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Dynamic-Linking.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Dynamic-Linking.html#overview-of-dynamic-linking">Overview of Dynamic Linking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Dynamic-Linking.html#practical-details">Practical Details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Dynamic-Linking.html#load-time-dynamic-linking">Load-time Dynamic Linking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Dynamic-Linking.html#runtime-dynamic-linking-with-dlopen">Runtime Dynamic Linking with <code class="docutils literal notranslate"><span class="pre">dlopen()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Dynamic-Linking.html#code-size">Code Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Dynamic-Linking.html#system-libraries">System Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Dynamic-Linking.html#miscellaneous-notes">Miscellaneous Notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Dynamic-Linking.html#dynamic-checks">Dynamic Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Dynamic-Linking.html#limitations">Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Dynamic-Linking.html#pthreads-support">Pthreads support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html">Running HTML files with emrun</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#quick-how-to">Quick how-to</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#choosing-the-browser-to-run">Choosing the browser to run</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#security-implications">Security implications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#controlling-web-server-operation">Controlling web server operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#controlling-log-output">Controlling log output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#cleaning-up-after-the-run">Cleaning up after the run</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#running-web-pages-in-firefox">Running web pages in Firefox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Running-html-files-with-emrun.html#running-web-pages-on-an-android-device">Running web pages on an Android device</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiling/Travis.html">Building projects on Travis CI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Travis.html#a-sample-travis-yml">A sample .travis.yml</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiling/Deploying-Pages.html">Deploying Emscripten Compiled Pages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Deploying-Pages.html#build-files-and-custom-shell">Build Files and Custom Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Deploying-Pages.html#optimizing-download-sizes">Optimizing Download Sizes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Deploying-Pages.html#optimizing-page-startup-times">Optimizing Page Startup Times</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Deploying-Pages.html#providing-a-quick-second-time-load">Providing a Quick Second Time Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Deploying-Pages.html#reserving-memory-for-compiled-code">Reserving Memory for Compiled Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Deploying-Pages.html#robust-error-handling">Robust Error Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Deploying-Pages.html#prepare-for-the-web-environment">Prepare for The Web Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiling/GitLab.html">Building and Deploying on GitLab</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../compiling/GitLab.html#a-sample-gitlab-ci-yml">A sample .gitlab-ci.yml</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../porting/index.html">Porting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../porting/guidelines/index.html">Code Portability and Limitations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/guidelines/portability_guidelines.html">Portability Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/portability_guidelines.html#current-web-limitations">Current Web limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/portability_guidelines.html#code-that-cannot-be-compiled">Code that cannot be compiled</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/portability_guidelines.html#code-that-compiles-but-might-run-slowly">Code that compiles but might run slowly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/portability_guidelines.html#other-issues">Other issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/guidelines/api_limitations.html">API Limitations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/api_limitations.html#networking">Networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/api_limitations.html#file-systems">File Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/api_limitations.html#application-main-loop">Application Main Loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/api_limitations.html#other-apis">Other APIs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/guidelines/function_pointer_issues.html">Function Pointer Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/function_pointer_issues.html#debugging-function-pointer-issues">Debugging function pointer issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/guidelines/function_pointer_issues.html#working-around-function-pointer-issues">Working around function pointer issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/guidelines/browser_limitations.html">Specific Browser Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/emscripten-runtime-environment.html">Emscripten Runtime Environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/emscripten-runtime-environment.html#input-output">Input/output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/emscripten-runtime-environment.html#file-systems">File Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/emscripten-runtime-environment.html#browser-main-loop">Browser main loop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/emscripten-runtime-environment.html#implementing-an-asynchronous-main-loop-in-c-c">Implementing an asynchronous main loop in C/C++</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/emscripten-runtime-environment.html#using-asyncify-to-yield-to-the-browser">Using Asyncify to yield to the browser</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/emscripten-runtime-environment.html#execution-lifecycle">Execution lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/emscripten-runtime-environment.html#emscripten-memory-representation">Emscripten memory representation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/index.html">Connecting C++ and JavaScript</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html">Interacting with code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#calling-compiled-c-functions-from-javascript-using-ccall-cwrap">Calling compiled C functions from JavaScript using ccall/cwrap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#interacting-with-an-api-written-in-c-c-from-nodejs">Interacting with an API written in C/C++ from NodeJS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#call-compiled-c-c-code-directly-from-javascript">Call compiled C/C++ code “directly” from JavaScript</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#calling-javascript-from-c-c">Calling JavaScript from C/C++</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#implement-a-c-api-in-javascript">Implement a C API in JavaScript</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#calling-javascript-functions-as-function-pointers-from-c">Calling JavaScript functions as function pointers from C</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#access-memory-from-javascript">Access memory from JavaScript</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#affect-execution-behaviour">Affect execution behaviour</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#environment-variables">Environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#binding-c-and-javascript-webidl-binder-and-embind">Binding C++ and JavaScript — WebIDL Binder and Embind</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html">Embind</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#a-quick-example">A quick example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#binding-libraries">Binding libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#memory-management">Memory management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#value-types">Value types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#advanced-class-concepts">Advanced class concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#overloaded-functions">Overloaded functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#enums">Enums</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#constants">Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#memory-views">Memory views</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#using-val-to-transliterate-javascript-to-c">Using <code class="docutils literal notranslate"><span class="pre">val</span></code> to transliterate JavaScript to C++</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#built-in-type-conversions">Built-in type conversions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/embind.html#performance">Performance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html">WebIDL Binder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#a-quick-example">A quick example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#modular-output">Modular output</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#using-c-classes-in-javascript">Using C++ classes in JavaScript</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#attributes">Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#pointers-references-value-types-ref-and-value">Pointers, References, Value types (Ref and Value)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#const">Const</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#un-deletable-classes-nodelete">Un-deletable classes (NoDelete)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#defining-inner-classes-and-classes-inside-namespaces-prefix">Defining inner classes and classes inside namespaces (Prefix)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#operators">Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#enums">enums</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#sub-classing-c-base-classes-in-javascript-jsimplementation">Sub-classing C++ base classes in JavaScript (JSImplementation)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#pointers-and-comparisons">Pointers and comparisons</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#null">NULL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#void">void*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#webidl-types">WebIDL types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/connecting_cpp_and_javascript/WebIDL-Binder.html#test-and-example-code">Test and example code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/files/index.html">Files and File Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/files/file_systems_overview.html">File System Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/file_systems_overview.html#emscripten-file-system-runtime-environment">Emscripten file system runtime environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/file_systems_overview.html#emscripten-file-system-architecture">Emscripten file system architecture</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/files/packaging_files.html">Packaging Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/packaging_files.html#packaging-using-emcc">Packaging using emcc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/packaging_files.html#packaging-using-the-file-packager-tool">Packaging using the file packager tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/packaging_files.html#changing-the-data-file-location">Changing the data file location</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/packaging_files.html#modifying-file-locations-in-the-virtual-file-system">Modifying file locations in the virtual file system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/packaging_files.html#valid-character-set">Valid Character Set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/packaging_files.html#monitoring-file-usage">Monitoring file usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/packaging_files.html#preloading-files">Preloading files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/packaging_files.html#test-code">Test code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/files/Synchronous-Virtual-XHR-Backed-File-System-Usage.html">Synchronous Virtual XHR Backed File System Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/Synchronous-Virtual-XHR-Backed-File-System-Usage.html#test-code">Test code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/files/Synchronous-Virtual-XHR-Backed-File-System-Usage.html#instructions">Instructions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/multimedia_and_graphics/index.html">Multimedia and Graphics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/multimedia_and_graphics/EGL-Support-in-Emscripten.html">EGL Support in Emscripten</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/EGL-Support-in-Emscripten.html#what-egl-is-not">What EGL is not?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/EGL-Support-in-Emscripten.html#how-to-create-a-webgl-context-using-egl">How to create a WebGL context using EGL?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/EGL-Support-in-Emscripten.html#implementation-status-and-notes">Implementation status and notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/multimedia_and_graphics/OpenGL-support.html">OpenGL support in Emscripten</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/OpenGL-support.html#webgl-friendly-subset-of-opengl-es-2-0-3-0">WebGL-friendly subset of OpenGL ES 2.0/3.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/OpenGL-support.html#opengl-es-2-0-3-0-emulation">OpenGL ES 2.0/3.0 emulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/OpenGL-support.html#emulation-of-older-desktop-opengl-api-features">Emulation of older Desktop OpenGL API features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/OpenGL-support.html#opengl-es-extensions">OpenGL ES extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/OpenGL-support.html#test-code-examples">Test code/examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/multimedia_and_graphics/OpenGL-support.html#bug-reports">Bug Reports</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/Audio.html">Audio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/Audio.html#supported-openal-extensions">Supported OpenAL extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Audio.html#guidelines-for-audio-on-emscripten">Guidelines for Audio on Emscripten</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Audio.html#emscripten-specific-capture-behavior">Emscripten-specific capture behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Audio.html#useful-implementation-details-of-openal-capture">Useful implementation details of OpenAL capture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Audio.html#improving-and-extending-the-implementation">Improving and extending the implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/Debugging.html">Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#debug-information">Debug information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#debug-mode-emcc-debug">Debug mode (EMCC_DEBUG)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#compiler-settings">Compiler settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#sanitizers">Sanitizers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#emcc-verbose-output">emcc verbose output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#manual-print-debugging">Manual print debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#handling-c-exceptions-from-javascript">Handling C++ exceptions from JavaScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#emscripten-specific-issues">Emscripten-specific issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/Debugging.html#memory-alignment-issues">Memory Alignment Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/Debugging.html#function-pointer-issues">Function Pointer Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/Debugging.html#infinite-loops">Infinite loops</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#profiling">Profiling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/Debugging.html#speed">Speed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/Debugging.html#memory">Memory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#autodebugger">AutoDebugger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/Debugging.html#autodebugger-regression-workflow">AutoDebugger Regression Workflow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#useful-links">Useful Links</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/Debugging.html#need-help">Need help?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/pthreads.html">Pthreads support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/pthreads.html#compiling-with-pthreads-enabled">Compiling with pthreads enabled</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/pthreads.html#additional-flags">Additional flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/pthreads.html#proxying">Proxying</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/pthreads.html#blocking-on-the-main-browser-thread">Blocking on the main browser thread</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/pthreads.html#special-considerations">Special considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/pthreads.html#running-code-and-tests">Running code and tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/networking.html">Networking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/networking.html#emscripten-websockets-api">Emscripten WebSockets API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/networking.html#emulated-posix-tcp-sockets-over-websockets">Emulated POSIX TCP Sockets over WebSockets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/networking.html#full-posix-sockets-over-websocket-proxy-server">Full POSIX Sockets over WebSocket Proxy Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/networking.html#xmlhttprequests-and-fetch-api">XmlHttpRequests and Fetch API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/networking.html#webrtc-and-udp">WebRTC and UDP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/simd.html">Porting SIMD code targeting WebAssembly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/simd.html#limitations-and-behavioral-differences">Limitations and behavioral differences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/simd.html#optimization-considerations">Optimization considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/simd.html#compiling-simd-code-targeting-x86-sse-instruction-set">Compiling SIMD code targeting x86 SSE instruction set</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/simd.html#compiling-simd-code-targeting-arm-neon-instruction-set">Compiling SIMD code targeting ARM NEON instruction set</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/exceptions.html">C++ Exceptions Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/exceptions.html#javascript-based-exception-support">JavaScript-based Exception Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/exceptions.html#webassembly-exception-handling-based-support">WebAssembly Exception Handling-based Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/exceptions.html#debugging-exceptions">Debugging Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/exceptions.html#stack-traces">Stack Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/exceptions.html#exception-messages">Exception Messages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/exceptions.html#using-exceptions-and-setjmp-longjmp-together">Using Exceptions and setjmp-longjmp Together</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/setjmp-longjmp.html">C setjmp-longjmp Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/setjmp-longjmp.html#javascript-based-setjmp-longjmp-support">JavaScript-based setjmp-longjmp Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/setjmp-longjmp.html#webassembly-exception-handling-based-setjmp-longjmp-support">WebAssembly Exception Handling-based setjmp-longjmp Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/setjmp-longjmp.html#using-exceptions-and-setjmp-longjmp-together">Using Exceptions and setjmp-longjmp Together</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting/asyncify.html">Asyncify</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#sleeping-yielding-to-the-event-loop">Sleeping / yielding to the event loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#making-async-web-apis-behave-as-if-they-were-synchronous">Making async Web APIs behave as if they were synchronous</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#ways-to-use-async-apis-in-older-engines">Ways to use async APIs in older engines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#more-on-asyncify-imports">More on <code class="docutils literal notranslate"><span class="pre">ASYNCIFY_IMPORTS</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#asyncify-with-dynamic-linking">Asyncify with Dynamic Linking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#usage-with-embind">Usage with Embind</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#usage-with-ccall">Usage with <code class="docutils literal notranslate"><span class="pre">ccall</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#optimizing">Optimizing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#potential-problems">Potential problems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../porting/asyncify.html#stack-overflows">Stack overflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/asyncify.html#reentrancy">Reentrancy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../porting/asyncify.html#starting-to-rewind-with-compiled-code-on-the-stack">Starting to rewind with compiled code on the stack</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../porting/asyncify.html#migrating-from-older-apis">Migrating from older APIs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiling/Building-Projects.html">Building Projects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#integrating-with-a-build-system">Integrating with a build system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#emscripten-linker-output-files">Emscripten linker output files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#building-projects-with-optimizations">Building projects with optimizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#building-projects-with-debug-information">Building projects with debug information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#using-libraries">Using libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#emscripten-ports">Emscripten Ports</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#adding-more-ports">Adding more ports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#build-system-issues">Build system issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#build-system-self-execution">Build system self-execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#faux-dynamic-linking">Faux Dynamic Linking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#configure-may-run-checks-that-appear-to-fail">Configure may run checks that appear to fail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../compiling/Building-Projects.html#archive-a-files">Archive (.a) files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#manually-using-emcc">Manually using emcc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#detecting-emscripten-in-preprocessor">Detecting Emscripten in Preprocessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#using-a-compiler-wrapper">Using a compiler wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#pkg-config">pkg-config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#examples-test-code">Examples / test code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compiling/Building-Projects.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">emscripten.h</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inline-assembly-javascript">Inline assembly/JavaScript</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#defines">Defines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#calling-javascript-from-c-c">Calling JavaScript From C/C++</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#function-pointer-types-for-callbacks">Function pointer types for callbacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#browser-execution-environment">Browser Execution Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-file-system-api">Asynchronous File System API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#typedefs">Typedefs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-indexeddb-api">Asynchronous IndexedDB API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiling">Compiling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#worker-api">Worker API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Typedefs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#logging-utilities">Logging utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#socket-event-registration">Socket event registration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#callback-functions">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#unaligned-types">Unaligned types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Typedefs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pseudo-synchronous-functions">Pseudo-synchronous functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sleeping">Sleeping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network">Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="#indexeddb">IndexedDB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#upstream-asyncify-functions">Upstream Asyncify functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">Typedefs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#abi-functions">ABI functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="html5.h.html">html5.h</a><ul>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#how-to-use-this-api">How to use this API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#registration-functions">Registration functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#callback-functions">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#functions-affected-by-web-security">Functions affected by web security</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#test-example-code">Test/Example code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#general-types">General types</a></li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#function-result-values">Function result values</a></li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#keys">Keys</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#defines">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#struct">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id3">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#mouse">Mouse</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id4">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id5">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id6">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id7">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#wheel">Wheel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id8">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id11">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id12">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id13">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#ui">UI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id15">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id16">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id17">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id18">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#focus">Focus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id21">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id22">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id24">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id25">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#device-orientation">Device orientation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id30">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id31">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id32">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id33">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#device-motion">Device motion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id35">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id36">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id38">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id39">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#id42">Orientation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id43">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id44">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id46">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id47">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#fullscreen">Fullscreen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id49">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id50">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id53">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id54">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#pointerlock">Pointerlock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id57">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id58">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id61">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id62">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#visibility">Visibility</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id66">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id67">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id68">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id69">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#touch">Touch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id70">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id71">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id72">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id73">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#gamepad">Gamepad</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id74">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id75">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id76">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id77">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#battery">Battery</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id78">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id79">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id81">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id82">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#vibration">Vibration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id84">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#page-unload">Page unload</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id86">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id87">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id88">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#webgl-context">WebGL context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id90">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id91">Struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id92">Callback functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id93">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#css">CSS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id95">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#id98">Animation and Timing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id99">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#id100">Console</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id101">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="html5.h.html#id102">Throw</a><ul>
<li class="toctree-l4"><a class="reference internal" href="html5.h.html#id103">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="preamble.js.html">preamble.js</a><ul>
<li class="toctree-l3"><a class="reference internal" href="preamble.js.html#calling-compiled-c-functions-from-javascript">Calling compiled C functions from JavaScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="preamble.js.html#accessing-memory">Accessing memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="preamble.js.html#conversion-functions-strings-pointers-and-arrays">Conversion functions — strings, pointers and arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="preamble.js.html#run-dependencies">Run dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="preamble.js.html#stack-trace">Stack trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="preamble.js.html#type-accessors-for-the-memory-model">Type accessors for the memory model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Filesystem-API.html">File System API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#new-file-system-wasmfs">New File System: WasmFS</a></li>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#including-file-system-support">Including File System Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#persistent-data">Persistent data</a></li>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#file-systems">File systems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Filesystem-API.html#memfs">MEMFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="Filesystem-API.html#nodefs">NODEFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="Filesystem-API.html#noderawfs">NODERAWFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="Filesystem-API.html#filesystem-api-idbfs">IDBFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="Filesystem-API.html#workerfs">WORKERFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="Filesystem-API.html#proxyfs">PROXYFS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#devices">Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#setting-up-standard-i-o-devices">Setting up standard I/O devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#id2">File system API</a></li>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#file-types">File types</a></li>
<li class="toctree-l3"><a class="reference internal" href="Filesystem-API.html#paths">Paths</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fetch.html">Fetch API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fetch.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="fetch.html#persisting-data">Persisting data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="fetch.html#persisting-data-bytes-from-memory">Persisting data bytes from memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="fetch.html#deleting-a-file-from-indexeddb">Deleting a file from IndexedDB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fetch.html#synchronous-fetches">Synchronous Fetches</a></li>
<li class="toctree-l3"><a class="reference internal" href="fetch.html#waitable-fetches">Waitable Fetches</a></li>
<li class="toctree-l3"><a class="reference internal" href="fetch.html#tracking-progress">Tracking Progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="fetch.html#managing-large-files">Managing Large Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="fetch.html#downloading-directly-to-indexeddb">Downloading directly to IndexedDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="fetch.html#streaming-downloads">Streaming Downloads</a></li>
<li class="toctree-l4"><a class="reference internal" href="fetch.html#byte-range-downloads">Byte Range Downloads</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fetch.html#todo-to-document">TODO To Document</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="module.html">Module object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="module.html#creating-the-module-object">Creating the Module object</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#compilation-settings">Compilation settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#affecting-execution">Affecting execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#other-methods">Other methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="val.h.html">val.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="bind.h.html">bind.h (under-construction)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#how-to-use-this-api">How to use this API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="bind.h.html#defines">Defines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#policies">Policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#select-overload-and-select-const">select_overload and select_const</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#value-tuples">Value tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#value-structs">Value structs</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#smart-pointers">Smart pointers</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#vectors">Vectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#maps">Maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#enums">Enums</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.h.html#constants">Constants</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="trace.h.html">trace.h</a><ul>
<li class="toctree-l3"><a class="reference internal" href="trace.h.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#compiler-interaction">Compiler Interaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#initialization-and-teardown">Initialization and Teardown</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#contexts">Contexts</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#frames">Frames</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#annotating-allocations">Annotating Allocations</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#overall-memory-usage">Overall Memory Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#logging-messages">Logging Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#tasks">Tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#reporting-errors">Reporting Errors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="trace.h.html#running-the-server">Running the Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="trace.h.html#design-notes">Design Notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#client-server-design">Client / Server Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#data-batching">Data Batching</a></li>
<li class="toctree-l4"><a class="reference internal" href="trace.h.html#do-not-perturb-the-heap">Do Not Perturb The Heap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="trace.h.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fiber.h.html">fiber.h</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fiber.h.html#api-reference">API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="fiber.h.html#types">Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="fiber.h.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="proxying.h.html">proxying.h</a><ul>
<li class="toctree-l3"><a class="reference internal" href="proxying.h.html#api-reference">API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="proxying.h.html#types">Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="proxying.h.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="proxying.h.html#c-api">C++ API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wasm_workers.html">Wasm Workers API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wasm_workers.html#quick-example">Quick Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="wasm_workers.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="wasm_workers.html#pthreads-vs-wasm-workers-which-one-to-use">Pthreads vs Wasm Workers: Which One to Use?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthreads-can-proxy-js-functions">Pthreads can proxy JS functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthreads-have-cancellation-points">Pthreads have cancellation points</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthreads-may-start-up-synchronously-wasm-workers-always-start-asynchronously">Pthreads may start up synchronously - Wasm Workers always start asynchronously</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthread-topology-is-flat-wasm-workers-are-hierarchical">Pthread topology is flat - Wasm Workers are hierarchical</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthreads-can-use-the-wasm-worker-synchronization-api-but-not-vice-versa">Pthreads can use the Wasm Worker synchronization API, but not vice versa</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthreads-have-a-thread-main-function-and-atexit-handlers">Pthreads have a “thread main” function and atexit handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthreads-have-a-per-thread-incoming-proxy-message-queue-wasm-workers-do-not">Pthreads have a per-thread incoming proxy message queue, Wasm Workers do not</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthreads-synchronize-wallclock-times">Pthreads synchronize wallclock times</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#input-events-api-backproxies-only-to-pthreads">Input events API backproxies only to pthreads</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#pthread-vs-emscripten-lock-implementation-differences">Pthread vs emscripten_lock implementation differences</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#memory-requirements">Memory requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#generated-code-size">Generated code size</a></li>
<li class="toctree-l4"><a class="reference internal" href="wasm_workers.html#api-differences">API Differences</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="wasm_workers.html#limitations">Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="wasm_workers.html#example-code">Example Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wasm_audio_worklets.html">Wasm Audio Worklets API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wasm_audio_worklets.html#development-overview">Development Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="wasm_audio_worklets.html#programming-example">Programming Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="wasm_audio_worklets.html#synchronizing-audio-thread-with-the-main-thread">Synchronizing audio thread with the main thread</a></li>
<li class="toctree-l3"><a class="reference internal" href="wasm_audio_worklets.html#more-examples">More Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced-apis.html">Advanced APIs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced-apis.html#settings-js">settings.js</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced-apis.html#preamble-js">preamble.js</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced-apis.html#advanced-file-system-api">Advanced File System API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools_reference/index.html">Tools Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools_reference/emsdk.html">Emscripten SDK (emsdk)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools_reference/emsdk.html#command-line-syntax">Command line syntax</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#arguments">Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#tools-and-sdk-targets">Tools and SDK targets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools_reference/emsdk.html#sdk-concepts">SDK concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools_reference/emsdk.html#emscripten-compiler-configuration-file-emscripten">Emscripten Compiler Configuration File (.emscripten)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools_reference/emsdk.html#how-to-guides">“How to” guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-just-get-the-latest-sdk">How do I just get the latest SDK?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-use-emsdk">How do I use emsdk?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-check-which-versions-of-the-sdk-and-tools-are-installed">How do I check which versions of the SDK and tools are installed?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-install-a-tool-sdk-version">How do I install a tool/SDK version?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-remove-a-tool-or-an-sdk">How do I remove a tool or an SDK?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-check-for-updates-to-the-emscripten-sdk">How do I check for updates to the Emscripten SDK?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-change-the-currently-active-sdk-version">How do I change the currently active SDK version?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-install-and-activate-old-emscripten-sdks-and-tools">How do I install and activate old Emscripten SDKs and tools?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-track-the-latest-emscripten-development-with-the-sdk">How do I track the latest Emscripten development with the SDK?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emsdk.html#how-do-i-use-my-own-emscripten-github-fork-with-the-sdk">How do I use my own Emscripten GitHub fork with the SDK?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools_reference/emcc.html">Emscripten Compiler Frontend (emcc)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools_reference/emcc.html#command-line-syntax">Command line syntax</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools_reference/emcc.html#arguments">Arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools_reference/emcc.html#environment-variables">Environment variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools_reference/emcmdprompt.html">Emscripten Windows Command Prompt (emcmdprompt.bat)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools_reference/emcmdprompt.html#command-line-syntax">Command line syntax</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../optimizing/Optimizing-Code.html">Optimizing Code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#how-to-optimize-code">How to optimize code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#how-emscripten-optimizes">How Emscripten optimizes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#link-times">Link Times</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#advanced-compiler-settings">Advanced compiler settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#webassembly">WebAssembly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#code-size">Code size</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Optimizing-Code.html#trading-off-code-size-and-performance">Trading off code size and performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Optimizing-Code.html#miscellaneous-code-size-tips">Miscellaneous code size tips</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#lto">LTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#eval-ctors">EVAL_CTORS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#very-large-codebases">Very large codebases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Optimizing-Code.html#running-by-itself">Running by itself</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Optimizing-Code.html#module-splitting">Module Splitting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#other-optimization-issues">Other optimization issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Optimizing-Code.html#c-exceptions">C++ exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Optimizing-Code.html#c-rtti">C++ RTTI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Optimizing-Code.html#memory-growth">Memory Growth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Optimizing-Code.html#viewing-code-optimization-passes">Viewing code optimization passes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#unsafe-optimizations">Unsafe optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#profiling">Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-Code.html#troubleshooting-poor-performance">Troubleshooting poor performance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html">Optimizing WebGL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#which-gl-mode-to-target">Which GL Mode To Target?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#how-to-profile-webgl">How To Profile WebGL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#avoid-redundant-calls">Avoid Redundant Calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#techniques-to-minimize-api-calls">Techniques To Minimize API Calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#avoid-gpu-cpu-sync-points">Avoid GPU-CPU Sync Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#gpu-driver-friendly-memory-access-behavior">GPU Driver Friendly Memory Access Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#when-the-gpu-is-the-bottleneck">When The GPU Is The Bottleneck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#optimizing-load-times-and-other-best-practices">Optimizing Load Times and Other Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Optimizing-WebGL.html#migrating-to-webgl-2">Migrating To WebGL 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../debugging/Sanitizers.html">Debugging with Sanitizers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../debugging/Sanitizers.html#undefined-behaviour-sanitizer">Undefined Behaviour Sanitizer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../debugging/Sanitizers.html#catching-null-dereference">Catching Null Dereference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debugging/Sanitizers.html#minimal-runtime">Minimal Runtime</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../debugging/Sanitizers.html#address-sanitizer">Address Sanitizer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../debugging/Sanitizers.html#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugging/Sanitizers.html#buffer-overflow">Buffer Overflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugging/Sanitizers.html#use-after-free">Use After Free</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugging/Sanitizers.html#memory-leaks">Memory Leaks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugging/Sanitizers.html#use-after-return">Use After Return</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugging/Sanitizers.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugging/Sanitizers.html#disabling-malloc-free-stack-traces">Disabling <code class="docutils literal notranslate"><span class="pre">malloc</span></code>/<code class="docutils literal notranslate"><span class="pre">free</span></code> Stack Traces</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugging/Sanitizers.html#comparison-to-safe-heap">Comparison to <code class="docutils literal notranslate"><span class="pre">SAFE_HEAP</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../building_from_source/index.html">Building Emscripten from Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../building_from_source/index.html#building-llvm">Building LLVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_from_source/index.html#building-binaryen">Building Binaryen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../building_from_source/toolchain_what_is_needed.html">Emscripten Toolchain Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../building_from_source/toolchain_what_is_needed.html#what-you-ll-need">What you’ll need</a></li>
<li class="toctree-l4"><a class="reference internal" href="../building_from_source/toolchain_what_is_needed.html#test-which-tools-are-installed">Test which tools are installed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../building_from_source/configuring_emscripten_settings.html">Configuring Emscripten Settings when Manually Building from Source</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../building_from_source/configuring_emscripten_settings.html#creating-the-compiler-configuration-file">Creating the compiler configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../building_from_source/configuring_emscripten_settings.html#locating-the-compiler-configuration-file-emscripten">Locating the compiler configuration file (.emscripten)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../building_from_source/configuring_emscripten_settings.html#compiler-configuration-file-format">Compiler configuration file-format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../building_from_source/configuring_emscripten_settings.html#editing-the-compiler-configuration-file">Editing the compiler configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../building_from_source/verify_emscripten_environment.html">Verifying the Emscripten Development Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../building_from_source/verify_emscripten_environment.html#testing-the-environment">Testing the environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../building_from_source/verify_emscripten_environment.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing to Emscripten</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributing.html#getting-started">Getting started</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributing.html#next-steps">Next steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/developers_guide.html">Developer’s Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developers_guide.html#setting-up">Setting up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developers_guide.html#repositories-and-branches-of-interest">Repositories and branches of interest</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developers_guide.html#submitting-patches">Submitting patches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developers_guide.html#code-reviews">Code reviews</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developers_guide.html#compiler-overview">Compiler overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developers_guide.html#emscripten-test-suite">Emscripten Test Suite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developers_guide.html#bisecting">Bisecting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developers_guide.html#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/AUTHORS.html">AUTHORS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../optimizing/Profiling-Toolchain.html">Profiling the Toolchain</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Profiling-Toolchain.html#quick-example">Quick Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Profiling-Toolchain.html#details">Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Profiling-Toolchain.html#profiling-tool-commands">Profiling Tool Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../optimizing/Profiling-Toolchain.html#instrumenting-python-scripts">Instrumenting Python Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../optimizing/Profiling-Toolchain.html#python-profiling-blocks">Python Profiling Blocks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../site/about.html">About this site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../site/about.html#searching-the-site">Searching the site</a></li>
<li class="toctree-l2"><a class="reference internal" href="../site/about.html#reporting-bugs">Reporting bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../site/about.html#contributing-to-the-site">Contributing to the site</a></li>
<li class="toctree-l2"><a class="reference internal" href="../site/about.html#building-the-site">Building the site</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../site/about.html#installing-sphinx">Installing Sphinx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../site/about.html#site-builds">Site builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../site/about.html#sdk-builds">SDK Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../site/about.html#build-version">Build version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../site/about.html#writing-and-updating-articles">Writing and updating articles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../site/about.html#style-guide">Style guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../site/about.html#how-to-link-to-a-document-or-heading">How to link to a document or heading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../site/about.html#recommended-section-heading-markup">Recommended section/heading markup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../site/about.html#working-in-markdown">Working in markdown</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../site/about.html#read-the-docs-theme">Read the docs theme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../site/about.html#site-license">Site license</a></li>
</ul>
</li>
</ul>

			<a class="toctree-l1" title="Index" href="../../genindex.html">Index</a>
        
      </div>
      &nbsp;
    </nav>
	
    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
         <i data-toggle="wy-nav-top" class="fa fa-bars"></i> 
        <!-- <a href="../../index.html">Emscripten</a> -->
		<a href="../../index.html"> <img src="../..//_static/Emscripten_logo_full.png" alt="Logo" /> </a>
      </nav>

	    
	  
      
      <div class="wy-nav-content">
        <div class="rst-content">
		
		   <!--begin hamishw addition --> 
   
   <!--Nav bar defined as a document followed by short version of nav text and long version
    If no such page exists then nav item is not created. CSS defines which of the long or short version is 
	displayed.   -->
   <a href="https://github.com/emscripten-core/emscripten"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
  
   <div class="main-nav-bar" style="">   
   
   <!-- the layout of the menu options - centered with left and right alignment of the first and last loop items respectively.
   This is VERY UGLY as I'm adding to the CSS in the code to force the alignment. Would be better just to have the elements here and have the CSS in the CSS file. This could be done with a CSS selector, but not worked out how yet. -->
   
	 <ul id="menu-options">
        
              <li style="text-align:left;"><a class="navlink-short" title="Docs" href="../index.html">Docs</a><a class="navlink-long" title="Documentation" href="../index.html">Documentation</a></li>
        
              <li><a class="navlink-short" title="SDK" href="../getting_started/downloads.html">SDK</a><a class="navlink-long" title="Downloads" href="../getting_started/downloads.html">Downloads</a></li>
        
              <li><a class="navlink-short" title="Help" href="../introducing_emscripten/community.html">Help</a><a class="navlink-long" title="Community" href="../introducing_emscripten/community.html">Community</a></li>
        
              <li style="text-align:right;"><a class="navlink-short" title="GitHub" href="../index.html">GitHub</a><a class="navlink-long" title="" href="../index.html"></a></li>
           	
     </ul>
	 <!-- <div style="clear:both;"></div> -->
	 <div role="navigation" aria-label="breadcrumbs navigation">

  <div class="breadcrumb-box">
     <a class="breadcrumb-box-item" href="../../index.html">Home</a> 
      
          <a class="breadcrumb-box-item" href="index.html">&raquo;&nbsp;API Reference</a>
      
    <div class="breadcrumb-box-item">&raquo;&nbsp;emscripten.h</div>
  </div>
 
</div>
 
   </div>
  
   
	
   <!--end hamishw addition -->
		
          <!--HamishW move <div role="navigation" aria-label="breadcrumbs navigation">

  <div class="breadcrumb-box">
     <a class="breadcrumb-box-item" href="../../index.html">Home</a> 
      
          <a class="breadcrumb-box-item" href="index.html">&raquo;&nbsp;API Reference</a>
      
    <div class="breadcrumb-box-item">&raquo;&nbsp;emscripten.h</div>
  </div>
 
</div> -->
          <div role="main">
            
  <section id="emscripten-h">
<span id="id1"></span><h1>emscripten.h<a class="headerlink" href="#emscripten-h" title="Permalink to this headline">¶</a></h1>
<p>This page documents the public C++ APIs provided by <a class="reference external" href="https://github.com/emscripten-core/emscripten/blob/main/system/include/emscripten/emscripten.h">emscripten.h</a>.</p>
<p>Emscripten uses existing/familiar APIs where possible (for example: <a class="reference internal" href="../site/glossary.html#term-sdl"><span class="xref std std-term">SDL</span></a>). This API provides C++ support for capabilities that are specific to JavaScript or the browser environment, or for which there is no existing API.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#inline-assembly-javascript" id="id13">Inline assembly/JavaScript</a></p></li>
<li><p><a class="reference internal" href="#calling-javascript-from-c-c" id="id14">Calling JavaScript From C/C++</a></p></li>
<li><p><a class="reference internal" href="#browser-execution-environment" id="id15">Browser Execution Environment</a></p></li>
<li><p><a class="reference internal" href="#asynchronous-file-system-api" id="id16">Asynchronous File System API</a></p></li>
<li><p><a class="reference internal" href="#asynchronous-indexeddb-api" id="id17">Asynchronous IndexedDB API</a></p></li>
<li><p><a class="reference internal" href="#compiling" id="id18">Compiling</a></p></li>
<li><p><a class="reference internal" href="#worker-api" id="id19">Worker API</a></p></li>
<li><p><a class="reference internal" href="#logging-utilities" id="id20">Logging utilities</a></p></li>
<li><p><a class="reference internal" href="#socket-event-registration" id="id21">Socket event registration</a></p></li>
<li><p><a class="reference internal" href="#unaligned-types" id="id22">Unaligned types</a></p></li>
<li><p><a class="reference internal" href="#pseudo-synchronous-functions" id="id23">Pseudo-synchronous functions</a></p></li>
<li><p><a class="reference internal" href="#upstream-asyncify-functions" id="id24">Upstream Asyncify functions</a></p></li>
<li><p><a class="reference internal" href="#abi-functions" id="id25">ABI functions</a></p></li>
</ul>
</div>
<section id="inline-assembly-javascript">
<h2><a class="toc-backref" href="#id13">Inline assembly/JavaScript</a><a class="headerlink" href="#inline-assembly-javascript" title="Permalink to this headline">¶</a></h2>
<p>Guide material for the following APIs can be found in <a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#interacting-with-code-call-javascript-from-native"><span class="std std-ref">Calling JavaScript from C/C++</span></a>.</p>
<section id="defines">
<h3>Defines<a class="headerlink" href="#defines" title="Permalink to this headline">¶</a></h3>
<dl class="macro">
<dt id="c.EM_JS">
<code class="sig-name descname">EM_JS</code><span class="sig-paren">(</span>return_type, function_name, arguments, code<span class="sig-paren">)</span><a class="headerlink" href="#c.EM_JS" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenient syntax for JavaScript library functions.</p>
<p>This allows you to declare JavaScript in your C code as a function, which can
be called like a normal C function. For example, the following C program would
display two alerts if it was compiled with Emscripten and run in the browser:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_JS(void, two_alerts, (), {
  alert(&#39;hai&#39;);
  alert(&#39;bai&#39;);
});

int main() {
  two_alerts();
  return 0;
}
</pre></div>
</div>
<p>Arguments can be passed as normal C arguments, and have the same name in the
JavaScript code. These arguments can either be of type <code class="docutils literal notranslate"><span class="pre">int32_t</span></code> or
<code class="docutils literal notranslate"><span class="pre">double</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_JS(void, take_args, (int x, float y), {
  console.log(&#39;I received: &#39; + [x, y]);
});

int main() {
  take_args(100, 35.5);
  return 0;
}
</pre></div>
</div>
<p>Null-terminated C strings can also be passed into <code class="docutils literal notranslate"><span class="pre">EM_JS</span></code> functions, but to
operate on them, they need to be copied out from the heap to convert to
high-level JavaScript strings.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_JS(void, say_hello, (const char* str), {
  console.log(&#39;hello &#39; + UTF8ToString(str));
}
</pre></div>
</div>
<p>In the same manner, pointers to any type (including <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code>) can be passed
inside <code class="docutils literal notranslate"><span class="pre">EM_JS</span></code> code, where they appear as integers like <code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span></code> pointers
above did. Accessing the data can be managed by reading the heap directly.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_JS(void, read_data, (int* data), {
  console.log(&#39;Data: &#39; + HEAP32[data&gt;&gt;2] + &#39;, &#39; + HEAP32[(data+4)&gt;&gt;2]);
});

int main() {
  int arr[2] = { 30, 45 };
  read_data(arr);
  return 0;
}
</pre></div>
</div>
<p>In addition, EM_JS functions can return a value back to C code. The output
value is passed back with a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_JS(int, add_forty_two, (int n), {
  return n + 42;
});

EM_JS(int, get_memory_size, (), {
  return HEAP8.length;
});

int main() {
  int x = add_forty_two(100);
  int y = get_memory_size();
  // ...
}
</pre></div>
</div>
<p>Strings can be returned back to C from JavaScript, but one needs to be careful
about memory management.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_JS(char*, get_unicode_str, (), {
  var jsString = &#39;Hello with some exotic Unicode characters: Tässä on yksi lumiukko: ☃, ole hyvä.&#39;;
  // &#39;jsString.length&#39; would return the length of the string as UTF-16
  // units, but Emscripten C strings operate as UTF-8.
  var lengthBytes = lengthBytesUTF8(jsString)+1;
  var stringOnWasmHeap = _malloc(lengthBytes);
  stringToUTF8(jsString, stringOnWasmHeap, lengthBytes);
  return stringOnWasmHeap;
});

int main() {
  char* str = get_unicode_str();
  printf(&quot;UTF8 string says: %s\n&quot;, str);
  // Each call to _malloc() must be paired with free(), or heap memory will leak!
  free(str);
  return 0;
}
</pre></div>
</div>
</dd></dl>

<dl class="macro">
<dt id="c.EM_ASM">
<code class="sig-name descname">EM_ASM</code><span class="sig-paren">(</span>...<span class="sig-paren">)</span><a class="headerlink" href="#c.EM_ASM" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenient syntax for inline assembly/JavaScript.</p>
<p>This allows you to declare JavaScript in your C code “inline”, which is then executed when your compiled code is run in the browser. For example, the following C code would display two alerts if it was compiled with Emscripten and run in the browser:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_ASM(alert(&#39;hai&#39;); alert(&#39;bai&#39;));
</pre></div>
</div>
<p>Arguments can be passed inside the JavaScript code block, where they arrive as variables <code class="docutils literal notranslate"><span class="pre">$0</span></code>, <code class="docutils literal notranslate"><span class="pre">$1</span></code> etc. These arguments can either be of type <code class="docutils literal notranslate"><span class="pre">int32_t</span></code> or <code class="docutils literal notranslate"><span class="pre">double</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_ASM({
  console.log(&#39;I received: &#39; + [$0, $1]);
}, 100, 35.5);
</pre></div>
</div>
<p>Note the <code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">}</span></code>.</p>
<p>Null-terminated C strings can also be passed into <code class="docutils literal notranslate"><span class="pre">EM_ASM</span></code> blocks, but to operate on them, they need to be copied out from the heap to convert to high-level JavaScript strings.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>EM_ASM(console.log(&#39;hello &#39; + UTF8ToString($0)), &quot;world!&quot;);
</pre></div>
</div>
<p>In the same manner, pointers to any type (including <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code>) can be passed inside <code class="docutils literal notranslate"><span class="pre">EM_ASM</span></code> code, where they appear as integers like <code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span></code> pointers above did. Accessing the data can be managed by reading the heap directly.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int arr[2] = { 30, 45 };
EM_ASM({
  console.log(&#39;Data: &#39; + HEAP32[$0&gt;&gt;2] + &#39;, &#39; + HEAP32[($0+4)&gt;&gt;2]);
}, arr);
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>As of Emscripten <code class="docutils literal notranslate"><span class="pre">1.30.4</span></code>, the contents of <code class="docutils literal notranslate"><span class="pre">EM_ASM</span></code> code blocks appear inside the normal JS file, and as result, Closure compiler and other JavaScript minifiers will be able to operate on them. You may need to use safety quotes in some places (<code class="docutils literal notranslate"><span class="pre">a['b']</span></code> instead of <code class="docutils literal notranslate"><span class="pre">a.b</span></code>) to avoid minification from occurring.</p></li>
<li><p>The C preprocessor does not have an understanding of JavaScript tokens, and as a result, if the <code class="docutils literal notranslate"><span class="pre">code</span></code> block contains a comma character <code class="docutils literal notranslate"><span class="pre">,</span></code>, it may be necessary to wrap the code block inside parentheses. For example, code <code class="docutils literal notranslate"><span class="pre">EM_ASM(return</span> <span class="pre">[1,2,3].length);</span></code> will not compile, but <code class="docutils literal notranslate"><span class="pre">EM_ASM((return</span> <span class="pre">[1,2,3].length));</span></code> does.</p></li>
</ul>
</div>
</dd></dl>

<dl class="macro">
<dt id="c.EM_ASM_INT">
<code class="sig-name descname">EM_ASM_INT</code><span class="sig-paren">(</span>code, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.EM_ASM_INT" title="Permalink to this definition">¶</a></dt>
<dd><p>This macro, as well as <a class="reference internal" href="#c.EM_ASM_DOUBLE" title="EM_ASM_DOUBLE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">EM_ASM_DOUBLE</span></code></a> and <a class="reference internal" href="#c.EM_ASM_PTR" title="EM_ASM_PTR"><code class="xref c c-macro docutils literal notranslate"><span class="pre">EM_ASM_PTR</span></code></a>,
behave like <a class="reference internal" href="#c.EM_ASM" title="EM_ASM"><code class="xref c c-macro docutils literal notranslate"><span class="pre">EM_ASM</span></code></a>, but in addition they also return a value back
to C code. The output value is passed back with a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int x = EM_ASM_INT({
  return $0 + 42;
}, 100);

int y = EM_ASM_INT(return HEAP8.length);
</pre></div>
</div>
</dd></dl>

<dl class="macro">
<dt id="c.EM_ASM_PTR">
<code class="sig-name descname">EM_ASM_PTR</code><span class="sig-paren">(</span>code, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.EM_ASM_PTR" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#c.EM_ASM_INT" title="EM_ASM_INT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">EM_ASM_INT</span></code></a> but for a pointer-sized return values.
When building with <code class="docutils literal notranslate"><span class="pre">-sMEMORY64</span></code> this results in i64 return value, otherwise
it results in an i32 return value.</p>
<p>Strings can be returned back to C from JavaScript, but one needs to be careful
about memory management.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>char *str = (char*)EM_ASM_PTR({
  var jsString = &#39;Hello with some exotic Unicode characters: Tässä on yksi lumiukko: ☃, ole hyvä.&#39;;
  var lengthBytes = lengthBytesUTF8(jsString)+1;
  // &#39;jsString.length&#39; would return the length of the string as UTF-16
  // units, but Emscripten C strings operate as UTF-8.
  var stringOnWasmHeap = _malloc(lengthBytes);
  stringToUTF8(jsString, stringOnWasmHeap, lengthBytes);
  return stringOnWasmHeap;
});
printf(&quot;UTF8 string says: %s\n&quot;, str);
free(str); // Each call to _malloc() must be paired with free(), or heap memory will leak!
</pre></div>
</div>
</dd></dl>

<dl class="macro">
<dt id="c.EM_ASM_DOUBLE">
<code class="sig-name descname">EM_ASM_DOUBLE</code><span class="sig-paren">(</span>code, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.EM_ASM_DOUBLE" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#c.EM_ASM_INT" title="EM_ASM_INT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">EM_ASM_INT</span></code></a> but for a <code class="docutils literal notranslate"><span class="pre">double</span></code> return value.</p>
</dd></dl>

<dl class="macro">
<dt id="c.MAIN_THREAD_EM_ASM">
<code class="sig-name descname">MAIN_THREAD_EM_ASM</code><span class="sig-paren">(</span>code, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.MAIN_THREAD_EM_ASM" title="Permalink to this definition">¶</a></dt>
<dd><p>This behaves like <a class="reference internal" href="#c.EM_ASM" title="EM_ASM"><code class="xref c c-macro docutils literal notranslate"><span class="pre">EM_ASM</span></code></a>, but does the call on the main thread. This is
useful in a pthreads build, when you want to interact with the DOM from a
pthread; this basically proxies the call for you.</p>
<p>This call is proxied in a synchronous way to the main thread, that is,
execution will resume after the main thread has finished running the JS.
Synchronous proxying also makes it possible to return a value, see the next
two variants.</p>
</dd></dl>

<dl class="macro">
<dt id="c.MAIN_THREAD_EM_ASM_INT">
<code class="sig-name descname">MAIN_THREAD_EM_ASM_INT</code><span class="sig-paren">(</span>code, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.MAIN_THREAD_EM_ASM_INT" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#c.MAIN_THREAD_EM_ASM" title="MAIN_THREAD_EM_ASM"><code class="xref c c-macro docutils literal notranslate"><span class="pre">MAIN_THREAD_EM_ASM</span></code></a> but returns an <code class="docutils literal notranslate"><span class="pre">int</span></code> value.</p>
</dd></dl>

<dl class="macro">
<dt id="c.MAIN_THREAD_EM_ASM_DOUBLE">
<code class="sig-name descname">MAIN_THREAD_EM_ASM_DOUBLE</code><span class="sig-paren">(</span>code, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.MAIN_THREAD_EM_ASM_DOUBLE" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#c.MAIN_THREAD_EM_ASM" title="MAIN_THREAD_EM_ASM"><code class="xref c c-macro docutils literal notranslate"><span class="pre">MAIN_THREAD_EM_ASM</span></code></a> but returns a <code class="docutils literal notranslate"><span class="pre">double</span></code> value.</p>
</dd></dl>

<dl class="macro">
<dt id="c.MAIN_THREAD_ASYNC_EM_ASM">
<code class="sig-name descname">MAIN_THREAD_ASYNC_EM_ASM</code><span class="sig-paren">(</span>code, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.MAIN_THREAD_ASYNC_EM_ASM" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#c.MAIN_THREAD_EM_ASM" title="MAIN_THREAD_EM_ASM"><code class="xref c c-macro docutils literal notranslate"><span class="pre">MAIN_THREAD_EM_ASM</span></code></a> but is proxied in an
<strong>asynchronous</strong> way, that is, the main thread will receive a request to run
the code, and will run it when it can; the worker will not wait for that.
(Note that if this is called on the main thread, then there is nothing to
proxy, and the JS is executed immediately and synchronously.)</p>
</dd></dl>

</section>
</section>
<section id="calling-javascript-from-c-c">
<h2><a class="toc-backref" href="#id14">Calling JavaScript From C/C++</a><a class="headerlink" href="#calling-javascript-from-c-c" title="Permalink to this headline">¶</a></h2>
<p>Guide material for the following APIs can be found in <a class="reference internal" href="../porting/connecting_cpp_and_javascript/Interacting-with-code.html#interacting-with-code-call-javascript-from-native"><span class="std std-ref">Calling JavaScript from C/C++</span></a>.</p>
<section id="function-pointer-types-for-callbacks">
<h3>Function pointer types for callbacks<a class="headerlink" href="#function-pointer-types-for-callbacks" title="Permalink to this headline">¶</a></h3>
<p>The following types are used to define function callback signatures used in a number of functions in this file.</p>
<dl class="type">
<dt id="c.em_callback_func">
<code class="sig-name descname">em_callback_func</code><a class="headerlink" href="#c.em_callback_func" title="Permalink to this definition">¶</a></dt>
<dd><p>General function pointer type for use in callbacks with no parameters.</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_callback_func</span><span class="p">)(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="type">
<dt id="c.em_arg_callback_func">
<code class="sig-name descname">em_arg_callback_func</code><a class="headerlink" href="#c.em_arg_callback_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function pointer type for use in callbacks with a single <code class="docutils literal notranslate"><span class="pre">void*</span></code> parameter.</p>
<p>This type is used to define function callbacks that need to pass arbitrary data. For example, <a class="reference internal" href="#c.emscripten_set_main_loop_arg" title="emscripten_set_main_loop_arg"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop_arg()</span></code></a> sets user-defined data, and passes it to a callback of this type on completion.</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_arg_callback_func</span><span class="p">)(</span><span class="n">void</span><span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="type">
<dt id="c.em_str_callback_func">
<code class="sig-name descname">em_str_callback_func</code><a class="headerlink" href="#c.em_str_callback_func" title="Permalink to this definition">¶</a></dt>
<dd><p>General function pointer type for use in callbacks with a C string (<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span></code>) parameter.</p>
<p>This type is used for function callbacks that need to be passed a C string. For example, it is used in <a class="reference internal" href="#c.emscripten_async_wget" title="emscripten_async_wget"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget()</span></code></a> to pass the name of a file that has been asynchronously loaded.</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_str_callback_func</span><span class="p">)(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_run_script">
void <code class="sig-name descname">emscripten_run_script</code><span class="sig-paren">(</span>const char<em> *script</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_run_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface to the underlying JavaScript engine. This function will <code class="docutils literal notranslate"><span class="pre">eval()</span></code> the given script. Note: If <code class="docutils literal notranslate"><span class="pre">-sDYNAMIC_EXECUTION=0</span></code> is set, this function will not be available.</p>
<p>This function can be called from a pthread, and it is executed in the scope of the Web Worker that is hosting the pthread. To evaluate a function in the scope of the main runtime thread, see the function emscripten_sync_run_in_main_runtime_thread().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>script</strong> (<em>const char*</em>) – The script to evaluate.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_run_script_int">
int <code class="sig-name descname">emscripten_run_script_int</code><span class="sig-paren">(</span>const char<em> *script</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_run_script_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface to the underlying JavaScript engine. This function will <code class="docutils literal notranslate"><span class="pre">eval()</span></code> the given script. Note: If <code class="docutils literal notranslate"><span class="pre">-sDYNAMIC_EXECUTION=0</span></code> is set, this function will not be available.</p>
<p>This function can be called from a pthread, and it is executed in the scope of the Web Worker that is hosting the pthread. To evaluate a function in the scope of the main runtime thread, see the function emscripten_sync_run_in_main_runtime_thread().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>script</strong> (<em>const char*</em>) – The script to evaluate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of the evaluation, as an integer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_run_script_string">
char *<code class="sig-name descname">emscripten_run_script_string</code><span class="sig-paren">(</span>const char<em> *script</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_run_script_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface to the underlying JavaScript engine. This function will <code class="docutils literal notranslate"><span class="pre">eval()</span></code> the given script. Note that this overload uses a single buffer shared between calls. Note: If <code class="docutils literal notranslate"><span class="pre">-sDYNAMIC_EXECUTION=0</span></code> is set, this function will not be available.</p>
<p>This function can be called from a pthread, and it is executed in the scope of the Web Worker that is hosting the pthread. To evaluate a function in the scope of the main runtime thread, see the function emscripten_sync_run_in_main_runtime_thread().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>script</strong> (<em>const char*</em>) – The script to evaluate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of the evaluation, as a string.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>char*</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_async_run_script">
void <code class="sig-name descname">emscripten_async_run_script</code><span class="sig-paren">(</span>const char<em> *script</em>, int<em> millis</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_async_run_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously run a script, after a specified amount of time.</p>
<p>This function can be called from a pthread, and it is executed in the scope of the Web Worker that is hosting the pthread. To evaluate a function in the scope of the main runtime thread, see the function emscripten_sync_run_in_main_runtime_thread().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>script</strong> (<em>const char*</em>) – The script to evaluate.</p></li>
<li><p><strong>millis</strong> (<em>int</em>) – The amount of time before the script is run, in milliseconds.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_async_load_script">
void <code class="sig-name descname">emscripten_async_load_script</code><span class="sig-paren">(</span>const char<em> *script</em>, <a class="reference internal" href="#c.em_callback_func" title="em_callback_func">em_callback_func</a><em> onload</em>, <a class="reference internal" href="#c.em_callback_func" title="em_callback_func">em_callback_func</a><em> onerror</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_async_load_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously loads a script from a URL.</p>
<p>This integrates with the run dependencies system, so your script can call <code class="docutils literal notranslate"><span class="pre">addRunDependency</span></code> multiple times, prepare various asynchronous tasks, and call <code class="docutils literal notranslate"><span class="pre">removeRunDependency</span></code> on them; when all are complete (or if there were no run dependencies to begin with), <code class="docutils literal notranslate"><span class="pre">onload</span></code> is called. An example use for this is to load an asset module, that is, the output of the file packager.</p>
<p>This function is currently only available in main browser thread, and it will immediately fail by calling the supplied onerror() handler if called in a pthread.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>script</strong> (<em>const char*</em>) – The script to evaluate.</p></li>
<li><p><strong>onload</strong> (<a class="reference internal" href="#c.em_callback_func" title="em_callback_func"><em>em_callback_func</em></a>) – A callback function, with no parameters, that is executed when the script has fully loaded.</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_callback_func" title="em_callback_func"><em>em_callback_func</em></a>) – A callback function, with no parameters, that is executed if there is an error in loading.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="browser-execution-environment">
<span id="emscripten-h-browser-execution-environment"></span><h2><a class="toc-backref" href="#id15">Browser Execution Environment</a><a class="headerlink" href="#browser-execution-environment" title="Permalink to this headline">¶</a></h2>
<p>Guide material for the following APIs can be found in <a class="reference internal" href="../porting/emscripten-runtime-environment.html#emscripten-runtime-environment"><span class="std std-ref">Emscripten Runtime Environment</span></a>.</p>
<section id="id3">
<h3>Functions<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_set_main_loop">
void <code class="sig-name descname">emscripten_set_main_loop</code><span class="sig-paren">(</span><a class="reference internal" href="#c.em_callback_func" title="em_callback_func">em_callback_func</a><em> func</em>, int<em> fps</em>, int<em> simulate_infinite_loop</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_main_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a C function as the main event loop for the calling thread.</p>
<p>If the main loop function needs to receive user-defined data, use <a class="reference internal" href="#c.emscripten_set_main_loop_arg" title="emscripten_set_main_loop_arg"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop_arg()</span></code></a> instead.</p>
<p>The JavaScript environment will call that function at a specified number of frames per second. If called on the main browser thread, setting 0 or a negative value as the <code class="docutils literal notranslate"><span class="pre">fps</span></code> will use the browser’s <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> mechanism to call the main loop function. This is <strong>HIGHLY</strong> recommended if you are doing rendering, as the browser’s <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> will make sure you render at a proper smooth rate that lines up properly with the browser and monitor. If you do not render at all in your application, then you should pick a specific frame rate that makes sense for your code.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">simulate_infinite_loop</span></code> is true, the function will throw an exception in order to stop execution of the caller. This will lead to the main loop being entered instead of code after the call to <a class="reference internal" href="#c.emscripten_set_main_loop" title="emscripten_set_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop()</span></code></a> being run, which is the closest we can get to simulating an infinite loop (we do something similar in <a class="reference external" href="https://github.com/emscripten-core/emscripten/blob/1.29.12/system/include/GL/freeglut_std.h#L400">glutMainLoop</a> in <a class="reference external" href="http://www.opengl.org/resources/libraries/glut/">GLUT</a>). If this parameter is <code class="docutils literal notranslate"><span class="pre">false</span></code>, then the behavior is the same as it was before this parameter was added to the API, which is that execution continues normally. Note that in both cases we do not run global destructors, <code class="docutils literal notranslate"><span class="pre">atexit</span></code>, etc., since we know the main loop will still be running, but if we do not simulate an infinite loop then the stack will be unwound. That means that if <code class="docutils literal notranslate"><span class="pre">simulate_infinite_loop</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code>, and you created an object on the stack, it will be cleaned up before the main loop is called for the first time.</p>
<p>This function can be called in a pthread, in which case the callback loop will be set up to be called in the context of the calling thread. In order for the loop to work, the calling thread must regularly “yield back” to the browser by exiting from its pthread main function, since the callback will be able to execute only when the calling thread is not executing any other code. This means that running a synchronously blocking main loop is not compatible with the emscripten_set_main_loop() function.</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame()</span></code> API is not available in web workers, when called <code class="docutils literal notranslate"><span class="pre">emscripten_set_main_loop()</span></code> in a pthread with <code class="docutils literal notranslate"><span class="pre">fps</span></code> &lt;= 0, the effect of syncing up to the display’s refresh rate is emulated, and generally will not precisely line up with vsync intervals.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>There can be only <em>one</em> main loop function at a time, per thread. To change the main loop function, first <a class="reference internal" href="#c.emscripten_cancel_main_loop" title="emscripten_cancel_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">cancel</span></code></a> the current loop, and then call this function to set another.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="#c.emscripten_set_main_loop_expected_blockers" title="emscripten_set_main_loop_expected_blockers"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop_expected_blockers()</span></code></a>, <a class="reference internal" href="#c.emscripten_pause_main_loop" title="emscripten_pause_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_pause_main_loop()</span></code></a>, <a class="reference internal" href="#c.emscripten_resume_main_loop" title="emscripten_resume_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_resume_main_loop()</span></code></a> and <a class="reference internal" href="#c.emscripten_cancel_main_loop" title="emscripten_cancel_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_cancel_main_loop()</span></code></a> for information about blocking, pausing, and resuming the main loop of the calling thread.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling this function overrides the effect of any previous calls to <a class="reference internal" href="#c.emscripten_set_main_loop_timing" title="emscripten_set_main_loop_timing"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop_timing()</span></code></a> in the calling thread by applying the timing mode specified by the parameter <code class="docutils literal notranslate"><span class="pre">fps</span></code>. To specify a different timing mode for the current thread, call the function <a class="reference internal" href="#c.emscripten_set_main_loop_timing" title="emscripten_set_main_loop_timing"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop_timing()</span></code></a> after setting up the main loop.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, using <a class="reference external" href="https://emscripten.org/docs/porting/exceptions.html#webassembly-exception-handling-proposal">the new Wasm exception handling</a> and <code class="docutils literal notranslate"><span class="pre">simulate_infinite_loop</span></code> == true at the same time does not work yet in C++ projects that have objects with destructors on the stack at the time of the call.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<a class="reference internal" href="#c.em_callback_func" title="em_callback_func"><em>em_callback_func</em></a>) – C function to set as main event loop for the calling thread.</p></li>
<li><p><strong>fps</strong> (<em>int</em>) – Number of frames per second that the JavaScript will call the function. Setting <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">&lt;=0</span></code> (recommended) uses the browser’s <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> mechanism to call the function.</p></li>
<li><p><strong>simulate_infinite_loop</strong> (<em>int</em>) – If true, this function will throw an exception in order to stop execution of the caller.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_main_loop_arg">
void <code class="sig-name descname">emscripten_set_main_loop_arg</code><span class="sig-paren">(</span><a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> func</em>, void<em> *arg</em>, int<em> fps</em>, int<em> simulate_infinite_loop</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_main_loop_arg" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a C function as the main event loop for the calling thread, passing it user-defined data.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The information in <a class="reference internal" href="#c.emscripten_set_main_loop" title="emscripten_set_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop()</span></code></a> also applies to this function.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – C function to set as main event loop. The function signature must have a <code class="docutils literal notranslate"><span class="pre">void*</span></code> parameter for passing the <code class="docutils literal notranslate"><span class="pre">arg</span></code> value.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data passed to the main loop function, untouched by the API itself.</p></li>
<li><p><strong>fps</strong> (<em>int</em>) – Number of frames per second at which the JavaScript will call the function. Setting <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">&lt;=0</span></code> (recommended) uses the browser’s <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> mechanism to call the function.</p></li>
<li><p><strong>simulate_infinite_loop</strong> (<em>int</em>) – If true, this function will throw an exception in order to stop execution of the caller.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_push_main_loop_blocker">
void <code class="sig-name descname">emscripten_push_main_loop_blocker</code><span class="sig-paren">(</span><a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> func</em>, void<em> *arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_push_main_loop_blocker" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_push_uncounted_main_loop_blocker">
void <code class="sig-name descname">emscripten_push_uncounted_main_loop_blocker</code><span class="sig-paren">(</span><a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> func</em>, void<em> *arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_push_uncounted_main_loop_blocker" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a function that <strong>blocks</strong> the main loop for the calling thread.</p>
<p>The function is added to the back of a queue of events to be blocked; the main loop will not run until all blockers in the queue complete.</p>
<p>In the “counted” version, blockers are counted (internally) and <code class="docutils literal notranslate"><span class="pre">Module.setStatus</span></code> is called with some text to report progress (<code class="docutils literal notranslate"><span class="pre">setStatus</span></code> is a general hook that a program can define in order to show processing updates).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Main loop blockers block the main loop from running, and can be counted to show progress. In contrast, <code class="docutils literal notranslate"><span class="pre">emscripten_async_calls</span></code> are not counted, do not block the main loop, and can fire at specific time in the future.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – The main loop blocker function. The function signature must have a <code class="docutils literal notranslate"><span class="pre">void*</span></code> parameter for passing the <code class="docutils literal notranslate"><span class="pre">arg</span></code> value.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined arguments to pass to the blocker function.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_pause_main_loop">
void <code class="sig-name descname">emscripten_pause_main_loop</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_pause_main_loop" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_resume_main_loop">
void <code class="sig-name descname">emscripten_resume_main_loop</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_resume_main_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause and resume the main loop for the calling thread.</p>
<p>Pausing and resuming the main loop is useful if your app needs to perform some synchronous operation, for example to load a file from the network. It might be wrong to run the main loop before that finishes (the original code assumes that), so you can break the code up into asynchronous callbacks, but you must pause the main loop until they complete.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These are fairly low-level functions. <a class="reference internal" href="#c.emscripten_push_main_loop_blocker" title="emscripten_push_main_loop_blocker"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_push_main_loop_blocker()</span></code></a> (and friends) provide more convenient alternatives.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_cancel_main_loop">
void <code class="sig-name descname">emscripten_cancel_main_loop</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_cancel_main_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancels the main event loop for the calling thread.</p>
<p>See also <a class="reference internal" href="#c.emscripten_set_main_loop" title="emscripten_set_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop()</span></code></a> and <a class="reference internal" href="#c.emscripten_set_main_loop_arg" title="emscripten_set_main_loop_arg"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop_arg()</span></code></a> for information about setting and using the main loop.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function cancels the main loop, which means that it will no longer be called. No other changes occur to control flow. In particular, if you started the main loop with the <code class="docutils literal notranslate"><span class="pre">simulate_infinite_loop</span></code> option, you can still cancel the main loop, but execution will not continue in the code right after setting the main loop (we do not actually run an infinite loop there - that’s not possible in JavaScript, so to simulate an infinite loop we halt execution at that stage, and then the next thing that runs is the main loop itself, so it seems like an infinite loop has begun there; canceling the main loop sort of breaks the metaphor).</p>
</div>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_main_loop_timing">
int <code class="sig-name descname">emscripten_set_main_loop_timing</code><span class="sig-paren">(</span>int<em> mode</em>, int<em> value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_main_loop_timing" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the scheduling mode that the main loop tick function of the calling thread will be called with.</p>
<p>This function can be used to interactively control the rate at which Emscripten runtime drives the main loop specified by calling the function <a class="reference internal" href="#c.emscripten_set_main_loop" title="emscripten_set_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop()</span></code></a>. In native development, this corresponds with the “swap interval” or the “presentation interval” for 3D rendering. The new tick interval specified by this function takes effect immediately on the existing main loop, and this function must be called only after setting up a main loop via <a class="reference internal" href="#c.emscripten_set_main_loop" title="emscripten_set_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop()</span></code></a>.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param int mode</dt>
<dd class="field-odd"><p>The timing mode to use. Allowed values are EM_TIMING_SETTIMEOUT, EM_TIMING_RAF and EM_TIMING_SETIMMEDIATE.</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>int</em>) – <p>The timing value to activate for the main loop. This value interpreted differently according to the <code class="docutils literal notranslate"><span class="pre">mode</span></code> parameter:</p>
<ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">mode</span></code> is EM_TIMING_SETTIMEOUT, then <code class="docutils literal notranslate"><span class="pre">value</span></code> specifies the number of milliseconds to wait between subsequent ticks to the main loop and updates occur independent of the vsync rate of the display (vsync off). This method uses the JavaScript <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code> function to drive the animation.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">mode</span></code> is EM_TIMING_RAF, then updates are performed using the <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> function (with vsync enabled), and this value is interpreted as a “swap interval” rate for the main loop. The value of <code class="docutils literal notranslate"><span class="pre">1</span></code> specifies the runtime that it should render at every vsync (typically 60fps), whereas the value <code class="docutils literal notranslate"><span class="pre">2</span></code> means that the main loop callback should be called only every second vsync (30fps). As a general formula, the value <code class="docutils literal notranslate"><span class="pre">n</span></code> means that the main loop is updated at every n’th vsync, or at a rate of <code class="docutils literal notranslate"><span class="pre">60/n</span></code> for 60Hz displays, and <code class="docutils literal notranslate"><span class="pre">120/n</span></code> for 120Hz displays.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">mode</span></code> is EM_TIMING_SETIMMEDIATE, then updates are performed using the <code class="docutils literal notranslate"><span class="pre">setImmediate</span></code> function, or if not available, emulated via <code class="docutils literal notranslate"><span class="pre">postMessage</span></code>. See <cite>setImmediate on MDN &lt;https://developer.mozilla.org/en-US/docs/Web/API/Window/setImmediate&gt;</cite> for more information. Note that this mode is <strong>strongly not recommended</strong> to be used when deploying Emscripten output to the web, since it depends on an unstable web extension that is in draft status, browsers other than IE do not currently support it, and its implementation has been considered controversial in review.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The value 0 is returned on success, and a nonzero value is returned on failure. A failure occurs if there is no main loop active before calling this function.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Browsers heavily optimize towards using <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> for animation instead of the other provided modes. Because of that, for best experience across browsers, calling this function with <code class="docutils literal notranslate"><span class="pre">mode=EM_TIMING_RAF</span></code> and <code class="docutils literal notranslate"><span class="pre">value=1</span></code> will yield best results. Using the JavaScript <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code> function is known to cause stutter and generally worse experience than using the <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> function.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a functional difference between <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code> and <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code>: If the user minimizes the browser window or hides your application tab, browsers will typically stop calling <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> callbacks, but <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code>-based main loop will continue to be run, although with heavily throttled intervals. See <cite>setTimeout on MDN &lt;https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers.setTimeout#Inactive_tabs&gt;</cite> for more information.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_main_loop_timing">
void <code class="sig-name descname">emscripten_get_main_loop_timing</code><span class="sig-paren">(</span>int<em> *mode</em>, int<em> *value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_main_loop_timing" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current main loop timing mode that is in effect. For interpretation of the values, see the documentation of the function <a class="reference internal" href="#c.emscripten_set_main_loop_timing" title="emscripten_set_main_loop_timing"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop_timing()</span></code></a>. The timing mode is controlled by calling the functions <a class="reference internal" href="#c.emscripten_set_main_loop_timing" title="emscripten_set_main_loop_timing"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop_timing()</span></code></a> and <a class="reference internal" href="#c.emscripten_set_main_loop" title="emscripten_set_main_loop"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_main_loop()</span></code></a>.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param mode</dt>
<dd class="field-odd"><p>If not null, the used timing mode is returned here.</p>
</dd>
<dt class="field-even">type mode</dt>
<dd class="field-even"><p>int*</p>
</dd>
<dt class="field-odd">param value</dt>
<dd class="field-odd"><p>If not null, the used timing value is returned here.</p>
</dd>
<dt class="field-even">type value</dt>
<dd class="field-even"><p>int*</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_main_loop_expected_blockers">
void <code class="sig-name descname">emscripten_set_main_loop_expected_blockers</code><span class="sig-paren">(</span>int<em> num</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_main_loop_expected_blockers" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of blockers that are about to be pushed.</p>
<p>The number is used for reporting the <em>relative progress</em> through a set of blockers, after which the main loop will continue.</p>
<p>For example, a game might have to run 10 blockers before starting a new level. The operation would first set this value as ‘10’ and then push the 10 blockers. When the 3<sup>rd</sup> blocker (say) completes, progress is displayed as 3/10.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num</strong> (<em>int</em>) – The number of blockers that are about to be pushed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_async_call">
void <code class="sig-name descname">emscripten_async_call</code><span class="sig-paren">(</span><a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> func</em>, void<em> *arg</em>, int<em> millis</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_async_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a C function asynchronously, that is, after returning control to the JavaScript event loop.</p>
<p>This is done by a <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code>.</p>
<p>When building natively this becomes a simple direct call, after <code class="docutils literal notranslate"><span class="pre">SDL_Delay</span></code> (you must include <strong>SDL.h</strong> for that).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">millis</span></code> is negative, the browser’s <code class="docutils literal notranslate"><span class="pre">requestAnimationFrame</span></code> mechanism is used. (Note that 0 means that <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code> is still used, which basically means “run asynchronously as soon as possible”.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – The C function to call asynchronously. The function signature must have a <code class="docutils literal notranslate"><span class="pre">void*</span></code> parameter for passing the <code class="docutils literal notranslate"><span class="pre">arg</span></code> value.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined argument to pass to the C function.</p></li>
<li><p><strong>millis</strong> (<em>int</em>) – Timeout before function is called.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_exit_with_live_runtime">
void <code class="sig-name descname">emscripten_exit_with_live_runtime</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_exit_with_live_runtime" title="Permalink to this definition">¶</a></dt>
<dd><p>Exits the program immediately, but leaves the runtime alive so that you can continue to run code later (so global destructors etc., are not run). Note that the runtime is kept alive automatically when you do an asynchronous operation like <a class="reference internal" href="#c.emscripten_async_call" title="emscripten_async_call"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_call()</span></code></a>, so you don’t need to call this function for those cases.</p>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_force_exit">
void <code class="sig-name descname">emscripten_force_exit</code><span class="sig-paren">(</span>int<em> status</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_force_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuts down the runtime and exits (terminates) the program, as if you called <code class="docutils literal notranslate"><span class="pre">exit()</span></code>.</p>
<p>The difference is that <code class="docutils literal notranslate"><span class="pre">emscripten_force_exit</span></code> will shut down the runtime even if you previously called <a class="reference internal" href="#c.emscripten_exit_with_live_runtime" title="emscripten_exit_with_live_runtime"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_exit_with_live_runtime()</span></code></a> or otherwise kept the runtime alive. In other words, this method gives you the option to completely shut down the runtime after it was kept alive beyond the completion of <code class="docutils literal notranslate"><span class="pre">main()</span></code>.</p>
<p>Note that if <code class="docutils literal notranslate"><span class="pre">EXIT_RUNTIME</span></code> is not set (which is the case by default) then the runtime cannot be shut down, as we do not include the code to do so. Build with <code class="docutils literal notranslate"><span class="pre">-sEXIT_RUNTIME</span></code> if you want to be able to exit the runtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>status</strong> (<em>int</em>) – The same as for the <em>libc</em> function <a class="reference external" href="http://linux.die.net/man/3/exit">exit()</a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_device_pixel_ratio">
double <code class="sig-name descname">emscripten_get_device_pixel_ratio</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_device_pixel_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of <code class="docutils literal notranslate"><span class="pre">window.devicePixelRatio</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>double</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The pixel ratio or 1.0 if not supported.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_window_title">
char *<code class="sig-name descname">emscripten_get_window_title</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_window_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the window title.</p>
<p>The returned string will be valid until the next call of the function</p>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_window_title">
void <code class="sig-name descname">emscripten_set_window_title</code><span class="sig-paren">(</span>char<em> *title</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_window_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the window title.</p>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_screen_size">
void <code class="sig-name descname">emscripten_get_screen_size</code><span class="sig-paren">(</span>int<em> *width</em>, int<em> *height</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_screen_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the width and height of the screen.</p>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_hide_mouse">
void <code class="sig-name descname">emscripten_hide_mouse</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_hide_mouse" title="Permalink to this definition">¶</a></dt>
<dd><p>Hide the OS mouse cursor over the canvas.</p>
<p>Note that SDL’s <code class="docutils literal notranslate"><span class="pre">SDL_ShowCursor</span></code> command shows and hides the SDL cursor, not the OS one. This command is useful to hide the OS cursor if your app draws its own cursor.</p>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_now">
double <code class="sig-name descname">emscripten_get_now</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_now" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the highest-precision representation of the current time that the browser provides.</p>
<p>This uses either <code class="docutils literal notranslate"><span class="pre">Date.now</span></code> or <code class="docutils literal notranslate"><span class="pre">performance.now</span></code>. The result is not an absolute time, and is only meaningful in comparison to other calls to this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>double</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The current time, in milliseconds (ms).</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_random">
float <code class="sig-name descname">emscripten_random</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a random number in the range 0-1. This maps to <code class="docutils literal notranslate"><span class="pre">Math.random()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A random number.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="asynchronous-file-system-api">
<span id="emscripten-h-asynchronous-file-system-api"></span><h2><a class="toc-backref" href="#id16">Asynchronous File System API</a><a class="headerlink" href="#asynchronous-file-system-api" title="Permalink to this headline">¶</a></h2>
<section id="typedefs">
<h3>Typedefs<a class="headerlink" href="#typedefs" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="c.em_async_wget_onload_func">
<code class="sig-name descname">em_async_wget_onload_func</code><a class="headerlink" href="#c.em_async_wget_onload_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback of <a class="reference internal" href="#c.emscripten_async_wget_data" title="emscripten_async_wget_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget_data()</span></code></a> (specific values of the parameters documented in that method).</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_async_wget_onload_func</span><span class="p">)(</span><span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="type">
<dt id="c.em_async_wget2_onload_func">
<code class="sig-name descname">em_async_wget2_onload_func</code><a class="headerlink" href="#c.em_async_wget2_onload_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback of <a class="reference internal" href="#c.emscripten_async_wget2" title="emscripten_async_wget2"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget2()</span></code></a> (specific values of the parameters documented in that method).</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_async_wget2_onload_func</span><span class="p">)(</span><span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="n">const</span> <span class="n">char</span><span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="type">
<dt id="c.em_async_wget2_onstatus_func">
<code class="sig-name descname">em_async_wget2_onstatus_func</code><a class="headerlink" href="#c.em_async_wget2_onstatus_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for the <code class="docutils literal notranslate"><span class="pre">onerror</span></code> and <code class="docutils literal notranslate"><span class="pre">onprogress</span></code> callbacks of <a class="reference internal" href="#c.emscripten_async_wget2" title="emscripten_async_wget2"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget2()</span></code></a> (specific values of the parameters documented in that method).</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_async_wget2_onstatus_func</span><span class="p">)(</span><span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="type">
<dt id="c.em_async_wget2_data_onload_func">
<code class="sig-name descname">em_async_wget2_data_onload_func</code><a class="headerlink" href="#c.em_async_wget2_data_onload_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback of <a class="reference internal" href="#c.emscripten_async_wget2_data" title="emscripten_async_wget2_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget2_data()</span></code></a> (specific values of the parameters documented in that method).</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_async_wget2_data_onload_func</span><span class="p">)(</span><span class="n">unsigned</span><span class="p">,</span> <span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="n">void</span> <span class="o">*</span><span class="p">,</span> <span class="n">unsigned</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="type">
<dt id="c.em_async_wget2_data_onerror_func">
<code class="sig-name descname">em_async_wget2_data_onerror_func</code><a class="headerlink" href="#c.em_async_wget2_data_onerror_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for the <code class="docutils literal notranslate"><span class="pre">onerror</span></code> callback of <a class="reference internal" href="#c.emscripten_async_wget2_data" title="emscripten_async_wget2_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget2_data()</span></code></a> (specific values of the parameters documented in that method).</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_async_wget2_data_onerror_func</span><span class="p">)(</span><span class="n">unsigned</span><span class="p">,</span> <span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">const</span> <span class="n">char</span><span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="type">
<dt id="c.em_async_wget2_data_onprogress_func">
<code class="sig-name descname">em_async_wget2_data_onprogress_func</code><a class="headerlink" href="#c.em_async_wget2_data_onprogress_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for the <code class="docutils literal notranslate"><span class="pre">onprogress</span></code> callback of <a class="reference internal" href="#c.emscripten_async_wget2_data" title="emscripten_async_wget2_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget2_data()</span></code></a> (specific values of the parameters documented in that method).</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_async_wget2_data_onprogress_func</span><span class="p">)(</span><span class="n">unsigned</span><span class="p">,</span> <span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="type">
<dt id="c.em_run_preload_plugins_data_onload_func">
<code class="sig-name descname">em_run_preload_plugins_data_onload_func</code><a class="headerlink" href="#c.em_run_preload_plugins_data_onload_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback of <a class="reference internal" href="#c.emscripten_run_preload_plugins_data" title="emscripten_run_preload_plugins_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_run_preload_plugins_data()</span></code></a> (specific values of the parameters documented in that method).</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_run_preload_plugins_data_onload_func</span><span class="p">)(</span><span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="n">const</span> <span class="n">char</span><span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="id4">
<h3>Functions<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_async_wget">
void <code class="sig-name descname">emscripten_async_wget</code><span class="sig-paren">(</span>const char*<em> url</em>, const char*<em> file</em>, <a class="reference internal" href="#c.em_str_callback_func" title="em_str_callback_func">em_str_callback_func</a><em> onload</em>, <a class="reference internal" href="#c.em_str_callback_func" title="em_str_callback_func">em_str_callback_func</a><em> onerror</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_async_wget" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a file from a URL asynchronously.</p>
<p>In addition to fetching the URL from the network, preload plugins are executed so that the data is usable in <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> and so forth (we asynchronously do the work to make the browser decode the image or audio etc.).  See <a class="reference internal" href="../porting/files/packaging_files.html#preloading-files"><span class="std std-ref">Preloading files</span></a> for more information on preloading files.</p>
<p>When the file is ready the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback will be called. If any error occurs <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called. The callbacks are called with the file as their argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>char* url</strong> (<em>const</em>) – The URL to load.</p></li>
<li><p><strong>char* file</strong> (<em>const</em>) – The name of the file created and loaded from the URL. If the file already exists it will be overwritten. If the destination directory for the file does not exist on the filesystem, it will be created. A relative pathname may be passed, which will be interpreted relative to the current working directory at the time of the call to this function.</p></li>
<li><p><strong>onload</strong> (<a class="reference internal" href="#c.em_str_callback_func" title="em_str_callback_func"><em>em_str_callback_func</em></a>) – <p>Callback on successful load of the file. The callback function parameter value is:</p>
<ul>
<li><p><em>(const char</em>)* : The name of the <code class="docutils literal notranslate"><span class="pre">file</span></code> that was loaded from the URL.</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_str_callback_func" title="em_str_callback_func"><em>em_str_callback_func</em></a>) – <p>Callback in the event of failure. The callback function parameter value is:</p>
<ul>
<li><p><em>(const char</em>)* : The name of the <code class="docutils literal notranslate"><span class="pre">file</span></code> that failed to load from the URL.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_async_wget_data">
void <code class="sig-name descname">emscripten_async_wget_data</code><span class="sig-paren">(</span>const char*<em> url</em>, void<em> *arg</em>, <a class="reference internal" href="#c.em_async_wget_onload_func" title="em_async_wget_onload_func">em_async_wget_onload_func</a><em> onload</em>, <a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> onerror</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_async_wget_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a buffer from a URL asynchronously.</p>
<p>This is the “data” version of <a class="reference internal" href="#c.emscripten_async_wget" title="emscripten_async_wget"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget()</span></code></a>.</p>
<p>Instead of writing to a file, this function writes to a buffer directly in memory. This avoids the overhead of using the emulated file system; note however that since files are not used, it cannot run preload plugins to set things up for <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> and so forth (<code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> etc. work on files).</p>
<p>When the file is ready then the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback will be called. If any error occurred <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>const char*</em>) – The URL of the file to load.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data that is passed to the callbacks, untouched by the API itself. This may be used by a callback to identify the associated call.</p></li>
<li><p><strong>onload</strong> (<a class="reference internal" href="#c.em_async_wget_onload_func" title="em_async_wget_onload_func"><em>em_async_wget_onload_func</em></a>) – <p>Callback on successful load of the URL into the buffer. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(void</em>)* : A pointer to a buffer with the data. Note that, as with the worker API, the data buffer only lives during the callback; it must be used or copied during that time.</p></li>
<li><p><em>(int)</em> : The size of the buffer, in bytes.</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – <p>Callback in the event of failure. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_async_wget2">
int <code class="sig-name descname">emscripten_async_wget2</code><span class="sig-paren">(</span>const char*<em> url</em>, const char*<em> file</em>, const char*<em> requesttype</em>, const char*<em> param</em>, void<em> *arg</em>, <a class="reference internal" href="#c.em_async_wget2_onload_func" title="em_async_wget2_onload_func">em_async_wget2_onload_func</a><em> onload</em>, <a class="reference internal" href="#c.em_async_wget2_onstatus_func" title="em_async_wget2_onstatus_func">em_async_wget2_onstatus_func</a><em> onerror</em>, <a class="reference internal" href="#c.em_async_wget2_onstatus_func" title="em_async_wget2_onstatus_func">em_async_wget2_onstatus_func</a><em> onprogress</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_async_wget2" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a file from a URL asynchronously.</p>
<p>This is an <strong>experimental</strong> “more feature-complete” version of <a class="reference internal" href="#c.emscripten_async_wget" title="emscripten_async_wget"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget()</span></code></a>.</p>
<p>Preload plug-ins are at this time <em>not</em> executed on the downloaded data. You may want to call <a class="reference internal" href="#c.emscripten_run_preload_plugins" title="emscripten_run_preload_plugins"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_run_preload_plugins()</span></code></a> in the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback if you want to be able to use the downloaded file with <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> and such.</p>
<p>When the file is ready the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback will be called with the object pointers given in <code class="docutils literal notranslate"><span class="pre">arg</span></code> and <code class="docutils literal notranslate"><span class="pre">file</span></code>. During the download the <code class="docutils literal notranslate"><span class="pre">onprogress</span></code> callback is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>const char*</em>) – The URL of the file to load.</p></li>
<li><p><strong>file</strong> (<em>const char*</em>) – The name of the file created and loaded from the URL. If the file already exists it will be overwritten. If the destination directory for the file does not exist on the filesystem, it will be created. A relative pathname may be passed, which will be interpreted relative to the current working directory at the time of the call to this function.</p></li>
<li><p><strong>requesttype</strong> (<em>const char*</em>) – ‘GET’ or ‘POST’.</p></li>
<li><p><strong>param</strong> (<em>const char*</em>) – Request parameters for POST requests (see <code class="docutils literal notranslate"><span class="pre">requesttype</span></code>). The parameters are specified in the same way as they would be in the URL for an equivalent GET request: e.g. <code class="docutils literal notranslate"><span class="pre">key=value&amp;key2=value2</span></code>.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data that is passed to the callbacks, untouched by the API itself. This may be used by a callback to identify the associated call.</p></li>
<li><p><strong>onload</strong> (<a class="reference internal" href="#c.em_async_wget2_onload_func" title="em_async_wget2_onload_func"><em>em_async_wget2_onload_func</em></a>) – <p>Callback on successful load of the file. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(const char</em>)* : The <code class="docutils literal notranslate"><span class="pre">file</span></code> passed to the original call.</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_async_wget2_onstatus_func" title="em_async_wget2_onstatus_func"><em>em_async_wget2_onstatus_func</em></a>) – <p>Callback in the event of failure. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(int)</em> : The HTTP status code.</p></li>
</ul>
</p></li>
<li><p><strong>onprogress</strong> (<a class="reference internal" href="#c.em_async_wget2_onstatus_func" title="em_async_wget2_onstatus_func"><em>em_async_wget2_onstatus_func</em></a>) – <p>Callback during load of the file. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(int)</em> : The progress (percentage completed).</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A handle to request (<code class="docutils literal notranslate"><span class="pre">int</span></code>) that can be used to <a class="reference internal" href="#c.emscripten_async_wget2_abort" title="emscripten_async_wget2_abort"><code class="xref c c-func docutils literal notranslate"><span class="pre">abort</span></code></a> the request.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_async_wget2_data">
int <code class="sig-name descname">emscripten_async_wget2_data</code><span class="sig-paren">(</span>const char*<em> url</em>, const char*<em> requesttype</em>, const char*<em> param</em>, void<em> *arg</em>, int<em> free</em>, <a class="reference internal" href="#c.em_async_wget2_data_onload_func" title="em_async_wget2_data_onload_func">em_async_wget2_data_onload_func</a><em> onload</em>, <a class="reference internal" href="#c.em_async_wget2_data_onerror_func" title="em_async_wget2_data_onerror_func">em_async_wget2_data_onerror_func</a><em> onerror</em>, <a class="reference internal" href="#c.em_async_wget2_data_onprogress_func" title="em_async_wget2_data_onprogress_func">em_async_wget2_data_onprogress_func</a><em> onprogress</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_async_wget2_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a buffer from a URL asynchronously.</p>
<p>This is the “data” version of <a class="reference internal" href="#c.emscripten_async_wget2" title="emscripten_async_wget2"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget2()</span></code></a>. It is an <strong>experimental</strong> “more feature complete” version of <a class="reference internal" href="#c.emscripten_async_wget_data" title="emscripten_async_wget_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget_data()</span></code></a>.</p>
<p>Instead of writing to a file, this function writes to a buffer directly in memory. This avoids the overhead of using the emulated file system; note however that since files are not used, it cannot run preload plugins to set things up for <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> and so forth (<code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> etc. work on files).</p>
<p>When the file is ready the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback will be called with the object pointers given in <code class="docutils literal notranslate"><span class="pre">arg</span></code>, a pointer to the buffer in memory, and an unsigned integer containing the size of the buffer. During the download the <code class="docutils literal notranslate"><span class="pre">onprogress</span></code> callback is called with progress information. If an error occurs, <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called with the HTTP status code and a string containing the status description.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>const char*</em>) – The URL of the file to load.</p></li>
<li><p><strong>requesttype</strong> (<em>const char*</em>) – ‘GET’ or ‘POST’.</p></li>
<li><p><strong>param</strong> (<em>const char*</em>) – Request parameters for POST requests (see <code class="docutils literal notranslate"><span class="pre">requesttype</span></code>). The parameters are specified in the same way as they would be in the URL for an equivalent GET request: e.g. <code class="docutils literal notranslate"><span class="pre">key=value&amp;key2=value2</span></code>.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data that is passed to the callbacks, untouched by the API itself. This may be used by a callback to identify the associated call.</p></li>
<li><p><strong>free</strong> (<em>int</em>) – Tells the runtime whether to free the returned buffer after <code class="docutils literal notranslate"><span class="pre">onload</span></code> is complete. If <code class="docutils literal notranslate"><span class="pre">false</span></code> freeing the buffer is the receiver’s responsibility.</p></li>
<li><p><strong>onload</strong> (<a class="reference internal" href="#c.em_async_wget2_data_onload_func" title="em_async_wget2_data_onload_func"><em>em_async_wget2_data_onload_func</em></a>) – <p>Callback on successful load of the file. The callback function parameter values are:</p>
<ul>
<li><p><em>(unsigned)</em> : Handle to the request</p></li>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(void</em>)* : A pointer to the buffer in memory.</p></li>
<li><p><em>(unsigned)</em> : The size of the buffer (in bytes).</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_async_wget2_data_onerror_func" title="em_async_wget2_data_onerror_func"><em>em_async_wget2_data_onerror_func</em></a>) – <p>Callback in the event of failure. The callback function parameter values are:</p>
<ul>
<li><p><em>(unsigned)</em> : Handle to the request</p></li>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(int)</em> : The HTTP error code.</p></li>
<li><p><em>(const char</em>)* : A string with the status description.</p></li>
</ul>
</p></li>
<li><p><strong>onprogress</strong> (<a class="reference internal" href="#c.em_async_wget2_data_onprogress_func" title="em_async_wget2_data_onprogress_func"><em>em_async_wget2_data_onprogress_func</em></a>) – <p>Callback called (regularly) during load of the file to update progress. The callback function parameter values are:</p>
<ul>
<li><p><em>(unsigned)</em> : Handle to the request</p></li>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(int)</em> : The number of bytes loaded.</p></li>
<li><p><em>(int)</em> : The total size of the data in bytes, or zero if the size is unavailable.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A handle to request (<code class="docutils literal notranslate"><span class="pre">int</span></code>) that can be used to <a class="reference internal" href="#c.emscripten_async_wget2_abort" title="emscripten_async_wget2_abort"><code class="xref c c-func docutils literal notranslate"><span class="pre">abort</span></code></a> the request.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_async_wget2_abort">
void <code class="sig-name descname">emscripten_async_wget2_abort</code><span class="sig-paren">(</span>int<em> handle</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_async_wget2_abort" title="Permalink to this definition">¶</a></dt>
<dd><p>Abort an asynchronous request raised using <a class="reference internal" href="#c.emscripten_async_wget2" title="emscripten_async_wget2"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget2()</span></code></a> or <a class="reference internal" href="#c.emscripten_async_wget2_data" title="emscripten_async_wget2_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget2_data()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<em>int</em>) – A handle to request to be aborted.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_run_preload_plugins_data">
void <code class="sig-name descname">emscripten_run_preload_plugins_data</code><span class="sig-paren">(</span>char*<em> data</em>, int<em> size</em>, const char<em> *suffix</em>, void<em> *arg</em>, <a class="reference internal" href="#c.em_run_preload_plugins_data_onload_func" title="em_run_preload_plugins_data_onload_func">em_run_preload_plugins_data_onload_func</a><em> onload</em>, <a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> onerror</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_run_preload_plugins_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs preload plugins on a buffer of data asynchronously. This is a “data” version of <a class="reference internal" href="#c.emscripten_run_preload_plugins" title="emscripten_run_preload_plugins"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_run_preload_plugins()</span></code></a>, which receives raw data as input instead of a filename (this can prevent the need to write data to a file first). See <a class="reference internal" href="../porting/files/packaging_files.html#preloading-files"><span class="std std-ref">Preloading files</span></a> for more information on preload plugins.</p>
<p>When file is loaded then the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback will be called. If any error occurs <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called.</p>
<p><code class="docutils literal notranslate"><span class="pre">onload</span></code> also receives a second parameter, which is a ‘fake’ filename which you can pass into <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> (it is not an actual file, but it identifies this image for <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> to be able to process it). Note that the user of this API is responsible for <code class="docutils literal notranslate"><span class="pre">free()</span></code> ing the memory allocated for the fake filename.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>char*</em>) – The buffer of data to process.</p></li>
<li><p><strong>suffix</strong> (<em>const char*</em>) – The file suffix, e.g. ‘png’ or ‘jpg’.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data that is passed to the callbacks, untouched by the API itself. This may be used by a callback to identify the associated call.</p></li>
<li><p><strong>onload</strong> (<a class="reference internal" href="#c.em_run_preload_plugins_data_onload_func" title="em_run_preload_plugins_data_onload_func"><em>em_run_preload_plugins_data_onload_func</em></a>) – <p>Callback on successful processing of the data. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(const char</em>)* : A ‘fake’ filename which you can pass into <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code>. See above for more information.</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – <p>Callback in the event of failure. The callback function parameter value is:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">void emscripten_dlopen(const char *filename, int flags, void* user_data, em_dlopen_callback onsuccess, em_arg_callback_func onerror);</code></dt>
<dd><p>Starts and asyncronous dlopen operation to load a shared library from a
filename or URL.  Returns immediately and requires the caller to return to the
event loop.  The <code class="docutils literal notranslate"><span class="pre">onsuccess</span></code> and <code class="docutils literal notranslate"><span class="pre">onerror</span></code> callbacks are used to signal
success or failure of the request.  Upon <code class="docutils literal notranslate"><span class="pre">onerror</span></code> callback the normal
<code class="docutils literal notranslate"><span class="pre">dlerror</span></code> C function can be used get the error details.  The flags are the
same as those used in the normal <code class="docutils literal notranslate"><span class="pre">dlopen</span></code> C function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>char* filename</strong> (<em>const</em>) – The filename (or URLs) of the shared library to load.</p></li>
<li><p><strong>flags</strong> (<em>int</em>) – See dlopen flags.</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – User data passed to onsuccess, and onerror callbacks.</p></li>
<li><p><strong>onsuccess</strong> (<em>em_dlopen_callback</em>) – Called if the library was loaded successfully.</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – Called if there as an error loading the library.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="asynchronous-indexeddb-api">
<h2><a class="toc-backref" href="#id17">Asynchronous IndexedDB API</a><a class="headerlink" href="#asynchronous-indexeddb-api" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>IndexedDB is a browser API that lets you store data persistently, that is, you can save data there and load it later when the user re-visits the web page. IDBFS provides one way to use IndexedDB, through the Emscripten filesystem layer. The <code class="docutils literal notranslate"><span class="pre">emscripten_idb_*</span></code> methods listed here provide an alternative API, directly to IndexedDB, thereby avoiding the overhead of the filesystem layer.</p>
</div></blockquote>
<dl class="function">
<dt id="c.emscripten_idb_async_load">
void <code class="sig-name descname">emscripten_idb_async_load</code><span class="sig-paren">(</span>const char<em> *db_name</em>, const char<em> *file_id</em>, void*<em> arg</em>, <a class="reference internal" href="#c.em_async_wget_onload_func" title="em_async_wget_onload_func">em_async_wget_onload_func</a><em> onload</em>, <a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> onerror</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_idb_async_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads data from local IndexedDB storage asynchronously. This allows use of persistent data, without the overhead of the filesystem layer.</p>
<p>When the data is ready then the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback will be called. If any error occurred <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> – The IndexedDB database from which to load.</p></li>
<li><p><strong>file_id</strong> – The identifier of the data to load.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data that is passed to the callbacks, untouched by the API itself. This may be used by a callback to identify the associated call.</p></li>
<li><p><strong>onload</strong> (<a class="reference internal" href="#c.em_async_wget_onload_func" title="em_async_wget_onload_func"><em>em_async_wget_onload_func</em></a>) – <p>Callback on successful load of the URL into the buffer. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>(void</em>)* : A pointer to a buffer with the data. Note that, as with the worker API, the data buffer only lives during the callback; it must be used or copied during that time.</p></li>
<li><p><em>(int)</em> : The size of the buffer, in bytes.</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – <p>Callback in the event of failure. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">void emscripten_idb_async_store(const char *db_name, const char *file_id, void* ptr, int num, void* arg, em_arg_callback_func onstore, em_arg_callback_func onerror);</code></dt>
<dd><p>Stores data to local IndexedDB storage asynchronously. This allows use of persistent data, without the overhead of the filesystem layer.</p>
<p>When the data has been stored then the <code class="docutils literal notranslate"><span class="pre">onstore</span></code> callback will be called. If any error occurred <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> – The IndexedDB database from which to load.</p></li>
<li><p><strong>file_id</strong> – The identifier of the data to load.</p></li>
<li><p><strong>ptr</strong> – A pointer to the data to store.</p></li>
<li><p><strong>num</strong> – How many bytes to store.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data that is passed to the callbacks, untouched by the API itself. This may be used by a callback to identify the associated call.</p></li>
<li><p><strong>onstore</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – <p>Callback on successful store of the data buffer to the URL. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – <p>Callback in the event of failure. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_idb_async_delete">
void <code class="sig-name descname">emscripten_idb_async_delete</code><span class="sig-paren">(</span>const char<em> *db_name</em>, const char<em> *file_id</em>, void*<em> arg</em>, <a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> ondelete</em>, <a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> onerror</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_idb_async_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes data from local IndexedDB storage asynchronously.</p>
<p>When the data has been deleted then the <code class="docutils literal notranslate"><span class="pre">ondelete</span></code> callback will be called. If any error occurred <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> – The IndexedDB database.</p></li>
<li><p><strong>file_id</strong> – The identifier of the data.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data that is passed to the callbacks, untouched by the API itself. This may be used by a callback to identify the associated call.</p></li>
<li><p><strong>ondelete</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – <p>Callback on successful delete</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – <p>Callback in the event of failure. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_idb_async_exists">
void <code class="sig-name descname">emscripten_idb_async_exists</code><span class="sig-paren">(</span>const char<em> *db_name</em>, const char<em> *file_id</em>, void*<em> arg</em>, em_idb_exists_func<em> oncheck</em>, <a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func">em_arg_callback_func</a><em> onerror</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_idb_async_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if data with a certain ID exists in the local IndexedDB storage asynchronously.</p>
<p>When the data has been checked then the <code class="docutils literal notranslate"><span class="pre">oncheck</span></code> callback will be called. If any error occurred <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> – The IndexedDB database.</p></li>
<li><p><strong>file_id</strong> – The identifier of the data.</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – User-defined data that is passed to the callbacks, untouched by the API itself. This may be used by a callback to identify the associated call.</p></li>
<li><p><strong>oncheck</strong> (<em>em_idb_exists_func</em>) – <p>Callback on successful check, with arguments</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
<li><p><em>int</em> : Whether the file exists or not.</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_arg_callback_func" title="em_arg_callback_func"><em>em_arg_callback_func</em></a>) – <p>Callback in the event of failure. The callback function parameter values are:</p>
<ul>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_run_preload_plugins">
int <code class="sig-name descname">emscripten_run_preload_plugins</code><span class="sig-paren">(</span>const char*<em> file</em>, <a class="reference internal" href="#c.em_str_callback_func" title="em_str_callback_func">em_str_callback_func</a><em> onload</em>, <a class="reference internal" href="#c.em_str_callback_func" title="em_str_callback_func">em_str_callback_func</a><em> onerror</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_run_preload_plugins" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs preload plugins on a file asynchronously. It works on file data already present and performs any required asynchronous operations available as preload plugins, such as decoding images for use in <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code>, or decoding audio for use in <code class="docutils literal notranslate"><span class="pre">Mix_LoadWAV</span></code>. See <a class="reference internal" href="../porting/files/packaging_files.html#preloading-files"><span class="std std-ref">Preloading files</span></a> for more information on preloading plugins.</p>
<p>Once the operations are complete, the <code class="docutils literal notranslate"><span class="pre">onload</span></code> callback will be called. If any error occurs <code class="docutils literal notranslate"><span class="pre">onerror</span></code> will be called. The callbacks are called with the file as their argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>const char*</em>) – The name of the file to process.</p></li>
<li><p><strong>onload</strong> (<a class="reference internal" href="#c.em_str_callback_func" title="em_str_callback_func"><em>em_str_callback_func</em></a>) – <p>Callback on successful processing of the file. The callback function parameter value is:</p>
<ul>
<li><p><em>(const char</em>)* : The name of the <code class="docutils literal notranslate"><span class="pre">file</span></code> that was processed.</p></li>
</ul>
</p></li>
<li><p><strong>onerror</strong> (<a class="reference internal" href="#c.em_str_callback_func" title="em_str_callback_func"><em>em_str_callback_func</em></a>) – <p>Callback in the event of failure. The callback function parameter value is:</p>
<ul>
<li><p><em>(const char</em>)* : The name of the <code class="docutils literal notranslate"><span class="pre">file</span></code> for which the operation failed.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if successful, -1 if the file does not exist</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="compiling">
<h2><a class="toc-backref" href="#id18">Compiling</a><a class="headerlink" href="#compiling" title="Permalink to this headline">¶</a></h2>
<dl class="macro">
<dt id="c.EMSCRIPTEN_KEEPALIVE">
<code class="sig-name descname">EMSCRIPTEN_KEEPALIVE</code><a class="headerlink" href="#c.EMSCRIPTEN_KEEPALIVE" title="Permalink to this definition">¶</a></dt>
<dd><p>Tells the compiler and linker to preserve a symbol, and export it, as if you
added it to <a class="reference internal" href="../getting_started/FAQ.html#faq-dead-code-elimination"><span class="std std-ref">EXPORTED_FUNCTIONS</span></a>.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EMSCRIPTEN_KEEPALIVE</span> <span class="n">my_function</span><span class="p">()</span> <span class="p">{</span> <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;I am being kept alive</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span> <span class="p">}</span>
</pre></div>
</div>
<p>Note that this will only work if the object file in which the symbol is
defined is otherwise included by the linker.  If the object file is part of an
archive, and is not otherwise referenced the linker will not include it at all
and any symbols in the object file will not be included or exported.  One way
to work around this limitation is to use the <code class="docutils literal notranslate"><span class="pre">-Wl,--whole-archive</span></code> /
<code class="docutils literal notranslate"><span class="pre">-Wl,--no-whole-archive</span></code> flags on either side of the archive file.</p>
</dd></dl>

</section>
<section id="worker-api">
<h2><a class="toc-backref" href="#id19">Worker API</a><a class="headerlink" href="#worker-api" title="Permalink to this headline">¶</a></h2>
<section id="id5">
<h3>Typedefs<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<dl class="var">
<dt id="c.worker_handle">
int <code class="sig-name descname">worker_handle</code><a class="headerlink" href="#c.worker_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper around web workers that lets you create workers and communicate with them.</p>
<p>Note that the current API is mainly focused on a main thread that sends jobs to workers and waits for responses, i.e., in an asymmetrical manner, there is no current API to send a message without being asked for it from a worker to the main thread.</p>
</dd></dl>

<dl class="type">
<dt id="c.em_worker_callback_func">
<code class="sig-name descname">em_worker_callback_func</code><a class="headerlink" href="#c.em_worker_callback_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for the callback from <a class="reference internal" href="#c.emscripten_call_worker" title="emscripten_call_worker"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_call_worker()</span></code></a> (specific values of the parameters documented in that method).</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_worker_callback_func</span><span class="p">)(</span><span class="n">char</span><span class="o">*</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">void</span><span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="id6">
<h3>Functions<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_create_worker">
<a class="reference internal" href="#c.worker_handle" title="worker_handle">worker_handle</a> <code class="sig-name descname">emscripten_create_worker</code><span class="sig-paren">(</span>const char *<em> url</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_create_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a worker.</p>
<p>A worker must be compiled separately from the main program, and with the <code class="docutils literal notranslate"><span class="pre">BUILD_AS_WORKER</span></code> flag set to 1.</p>
<p>That worker must not be compiled with the <code class="docutils literal notranslate"><span class="pre">-pthread</span></code> flag as the POSIX threads implementation and this Worker API are incompatible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>const char*</em>) – The URL of the worker script.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A handle to the newly created worker.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>worker_handle</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_destroy_worker">
void <code class="sig-name descname">emscripten_destroy_worker</code><span class="sig-paren">(</span><a class="reference internal" href="#c.worker_handle" title="worker_handle">worker_handle</a><em> worker</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_destroy_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys a worker. See <a class="reference internal" href="#c.emscripten_create_worker" title="emscripten_create_worker"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_create_worker()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>worker</strong> (<a class="reference internal" href="#c.worker_handle" title="worker_handle"><em>worker_handle</em></a>) – A handle to the worker to be destroyed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_call_worker">
void <code class="sig-name descname">emscripten_call_worker</code><span class="sig-paren">(</span><a class="reference internal" href="#c.worker_handle" title="worker_handle">worker_handle</a><em> worker</em>, const char<em> *funcname</em>, char<em> *data</em>, int<em> size</em>, <a class="reference internal" href="#c.em_worker_callback_func" title="em_worker_callback_func">em_worker_callback_func</a><em> callback</em>, void<em> *arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_call_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously calls a worker.</p>
<p>The worker function will be called with two parameters: a data pointer, and a size. The data block defined by the pointer and size exists only during the callback: <strong>it cannot be relied upon afterwards</strong>. If you need to keep some of that information outside the callback, then it needs to be copied to a safe location.</p>
<p>The called worker function can return data, by calling <a class="reference internal" href="#c.emscripten_worker_respond" title="emscripten_worker_respond"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_worker_respond()</span></code></a>. When the worker is called, if a callback was given it will be called with three arguments: a data pointer, a size, and an argument that was provided when calling <a class="reference internal" href="#c.emscripten_call_worker" title="emscripten_call_worker"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_call_worker()</span></code></a> (to more easily associate callbacks to calls). The data block defined by the data pointer and size behave like the data block in the worker function — it exists only during the callback.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>worker</strong> (<a class="reference internal" href="#c.worker_handle" title="worker_handle"><em>worker_handle</em></a>) – A handle to the worker to be called.</p></li>
<li><p><strong>funcname</strong> (<em>const char*</em>) – The name of the function in the worker. The function must be a C function (so no C++ name mangling), and must be exported (<a class="reference internal" href="../getting_started/FAQ.html#faq-dead-code-elimination"><span class="std std-ref">EXPORTED_FUNCTIONS</span></a>).</p></li>
<li><p><strong>data</strong> (<em>char*</em>) – The address of a block of memory to copy over.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The size of the block of memory.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="#c.em_worker_callback_func" title="em_worker_callback_func"><em>em_worker_callback_func</em></a>) – <p>Worker callback with the response. This can be <code class="docutils literal notranslate"><span class="pre">null</span></code>. The callback function parameter values are:</p>
<ul>
<li><p><em>(char</em>)* : The <code class="docutils literal notranslate"><span class="pre">data</span></code> pointer provided in <a class="reference internal" href="#c.emscripten_call_worker" title="emscripten_call_worker"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_call_worker()</span></code></a>.</p></li>
<li><p><em>(int)</em> : The <code class="docutils literal notranslate"><span class="pre">size</span></code> of the block of data.</p></li>
<li><p><em>(void</em>)* : Equal to <code class="docutils literal notranslate"><span class="pre">arg</span></code> (user defined data).</p></li>
</ul>
</p></li>
<li><p><strong>arg</strong> (<em>void*</em>) – An argument (user data) to be passed to the callback</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_worker_respond">
void <code class="sig-name descname">emscripten_worker_respond</code><span class="sig-paren">(</span>char<em> *data</em>, int<em> size</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_worker_respond" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_worker_respond_provisionally">
void <code class="sig-name descname">emscripten_worker_respond_provisionally</code><span class="sig-paren">(</span>char<em> *data</em>, int<em> size</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_worker_respond_provisionally" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a response when in a worker call (that is, when called by the main thread using <a class="reference internal" href="#c.emscripten_call_worker" title="emscripten_call_worker"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_call_worker()</span></code></a>).</p>
<p>Both functions post a message back to the thread which called the worker. The <a class="reference internal" href="#c.emscripten_worker_respond_provisionally" title="emscripten_worker_respond_provisionally"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_worker_respond_provisionally()</span></code></a> variant can be invoked multiple times, which will queue up messages to be posted to the worker’s creator. Eventually, the _respond variant must be invoked, which will disallow further messages and free framework resources previously allocated for this worker call.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling the provisional version is optional, but you must call the non-provisional version to avoid leaks.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>char*</em>) – The message to be posted.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The size of the message, in bytes.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_worker_queue_size">
int <code class="sig-name descname">emscripten_get_worker_queue_size</code><span class="sig-paren">(</span><a class="reference internal" href="#c.worker_handle" title="worker_handle">worker_handle</a><em> worker</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_worker_queue_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks how many responses are being waited for from a worker.</p>
<p>This only counts calls to <a class="reference internal" href="#c.emscripten_call_worker" title="emscripten_call_worker"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_call_worker()</span></code></a> that had a callback (calls with null callbacks are ignored), and where the response has not yet been received. It is a simple way to check on the status of the worker to see how busy it is, and do basic decisions about throttling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>worker</strong> (<a class="reference internal" href="#c.worker_handle" title="worker_handle"><em>worker_handle</em></a>) – The handle to the relevant worker.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of responses waited on from a worker.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="logging-utilities">
<h2><a class="toc-backref" href="#id20">Logging utilities</a><a class="headerlink" href="#logging-utilities" title="Permalink to this headline">¶</a></h2>
<section id="id7">
<h3>Defines<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<dl class="macro">
<dt id="c.EM_LOG_CONSOLE">
<code class="sig-name descname">EM_LOG_CONSOLE</code><a class="headerlink" href="#c.EM_LOG_CONSOLE" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, logs directly to the browser console/inspector window. If not specified, logs via the application Module.</p>
</dd></dl>

<dl class="macro">
<dt id="c.EM_LOG_WARN">
<code class="sig-name descname">EM_LOG_WARN</code><a class="headerlink" href="#c.EM_LOG_WARN" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, prints a warning message (combined with <a class="reference internal" href="#c.EM_LOG_CONSOLE" title="EM_LOG_CONSOLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_CONSOLE</span></code></a>).</p>
</dd></dl>

<dl class="macro">
<dt id="c.EM_LOG_INFO">
<code class="sig-name descname">EM_LOG_INFO</code><a class="headerlink" href="#c.EM_LOG_INFO" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, prints an info message to console (combined with <a class="reference internal" href="#c.EM_LOG_CONSOLE" title="EM_LOG_CONSOLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_CONSOLE</span></code></a>).</p>
</dd></dl>

<dl class="macro">
<dt id="c.EM_LOG_DEBUG">
<code class="sig-name descname">EM_LOG_DEBUG</code><a class="headerlink" href="#c.EM_LOG_DEBUG" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, prints a debug message to console (combined with <a class="reference internal" href="#c.EM_LOG_CONSOLE" title="EM_LOG_CONSOLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_CONSOLE</span></code></a>).</p>
</dd></dl>

<dl class="macro">
<dt id="c.EM_LOG_ERROR">
<code class="sig-name descname">EM_LOG_ERROR</code><a class="headerlink" href="#c.EM_LOG_ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, prints an error message (combined with <a class="reference internal" href="#c.EM_LOG_CONSOLE" title="EM_LOG_CONSOLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_CONSOLE</span></code></a>). If neither <a class="reference internal" href="#c.EM_LOG_WARN" title="EM_LOG_WARN"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_WARN</span></code></a>, <a class="reference internal" href="#c.EM_LOG_ERROR" title="EM_LOG_ERROR"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_ERROR</span></code></a>, <a class="reference internal" href="#c.EM_LOG_INFO" title="EM_LOG_INFO"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_INFO</span></code></a> nor <a class="reference internal" href="#c.EM_LOG_DEBUG" title="EM_LOG_DEBUG"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_DEBUG</span></code></a> is specified, a log message is printed. <a class="reference internal" href="#c.EM_LOG_WARN" title="EM_LOG_WARN"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_WARN</span></code></a>, <a class="reference internal" href="#c.EM_LOG_INFO" title="EM_LOG_INFO"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_INFO</span></code></a>, <a class="reference internal" href="#c.EM_LOG_DEBUG" title="EM_LOG_DEBUG"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_DEBUG</span></code></a> and <a class="reference internal" href="#c.EM_LOG_ERROR" title="EM_LOG_ERROR"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_ERROR</span></code></a> are mutually exclusive. If <a class="reference internal" href="#c.EM_LOG_CONSOLE" title="EM_LOG_CONSOLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_CONSOLE</span></code></a> is not specified then the message will be outputed via err() (for <a class="reference internal" href="#c.EM_LOG_ERROR" title="EM_LOG_ERROR"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_ERROR</span></code></a> or <a class="reference internal" href="#c.EM_LOG_WARN" title="EM_LOG_WARN"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_WARN</span></code></a>) or out() otherwise.</p>
</dd></dl>

<dl class="macro">
<dt id="c.EM_LOG_C_STACK">
<code class="sig-name descname">EM_LOG_C_STACK</code><a class="headerlink" href="#c.EM_LOG_C_STACK" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, prints a call stack that contains file names referring to original C sources using source map information.</p>
</dd></dl>

<dl class="macro">
<dt id="c.EM_LOG_JS_STACK">
<code class="sig-name descname">EM_LOG_JS_STACK</code><a class="headerlink" href="#c.EM_LOG_JS_STACK" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, prints a call stack that contains file names referring to lines in the built .js/.html file along with the message. The flags <a class="reference internal" href="#c.EM_LOG_C_STACK" title="EM_LOG_C_STACK"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_C_STACK</span></code></a> and <a class="reference internal" href="#c.EM_LOG_JS_STACK" title="EM_LOG_JS_STACK"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_JS_STACK</span></code></a> can be combined to output both untranslated and translated file and line information.</p>
</dd></dl>

<dl class="macro">
<dt id="c.EM_LOG_NO_PATHS">
<code class="sig-name descname">EM_LOG_NO_PATHS</code><a class="headerlink" href="#c.EM_LOG_NO_PATHS" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, the pathnames of the file information in the call stack will be omitted.</p>
</dd></dl>

<dl class="macro">
<dt id="c.EM_LOG_FUNC_PARAMS">
<code class="sig-name descname">EM_LOG_FUNC_PARAMS</code><a class="headerlink" href="#c.EM_LOG_FUNC_PARAMS" title="Permalink to this definition">¶</a></dt>
<dd><p>If specified, prints out the actual values of the parameters the functions were invoked with.</p>
</dd></dl>

</section>
<section id="id8">
<h3>Functions<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_get_compiler_setting">
long <code class="sig-name descname">emscripten_get_compiler_setting</code><span class="sig-paren">(</span>const char<em> *name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_compiler_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of a compiler setting.</p>
<p>For example, to return the integer representing the value of <code class="docutils literal notranslate"><span class="pre">INITIAL_MEMORY</span></code> during compilation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">emscripten_get_compiler_setting</span><span class="p">(</span><span class="s2">&quot;INITIAL_MEMORY&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For values containing anything other than an integer, a string is returned (you will need to cast the <code class="docutils literal notranslate"><span class="pre">long</span></code> return value to a <code class="docutils literal notranslate"><span class="pre">char*</span></code>).</p>
<p>Some useful things this can do is provide the version of Emscripten (“EMSCRIPTEN_VERSION”), the optimization level (“OPT_LEVEL”), debug level (“DEBUG_LEVEL”), etc.</p>
<p>For this command to work, you must build with the following compiler option (as we do not want to increase the build size with this metadata):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">sRETAIN_COMPILER_SETTINGS</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>const char*</em>) – The compiler setting to return.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the specified setting. Note that for values other than an integer, a string is returned (cast the <code class="docutils literal notranslate"><span class="pre">int</span></code> return value to a <code class="docutils literal notranslate"><span class="pre">char*</span></code>).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_has_asyncify">
int <code class="sig-name descname">emscripten_has_asyncify</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_has_asyncify" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether pseudo-synchronous functions can be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>1 if program was compiled with -sASYNCIFY, 0 otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_debugger">
void <code class="sig-name descname">emscripten_debugger</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_debugger" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits <code class="docutils literal notranslate"><span class="pre">debugger</span></code>.</p>
<p>This is inline in the code, which tells the JavaScript engine to invoke the debugger if it gets there.</p>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_log">
void <code class="sig-name descname">emscripten_log</code><span class="sig-paren">(</span>int<em> flags</em>, const char*<em> format</em>, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints out a message to the console, optionally with the callstack information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flags</strong> (<em>int</em>) – A binary OR of items from the list of <a class="reference internal" href="#c.EM_LOG_CONSOLE" title="EM_LOG_CONSOLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_xxx</span></code></a> flags that specify printing options.</p></li>
<li><p><strong>char* format</strong> (<em>const</em>) – A <code class="docutils literal notranslate"><span class="pre">printf</span></code>-style format string.</p></li>
<li><p><strong>...</strong> – A <code class="docutils literal notranslate"><span class="pre">printf</span></code>-style “…” parameter list that is parsed according to the <code class="docutils literal notranslate"><span class="pre">printf</span></code> formatting rules.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_callstack">
int <code class="sig-name descname">emscripten_get_callstack</code><span class="sig-paren">(</span>int<em> flags</em>, char<em> *out</em>, int<em> maxbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_callstack" title="Permalink to this definition">¶</a></dt>
<dd><p>Programmatically obtains the current callstack.</p>
<p>To query the amount of bytes needed for a callstack without writing it, pass 0 to <code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">maxbytes</span></code>, in which case the function will return the number of bytes (including the terminating zero) that will be needed to hold the full callstack. Note that this might be fully accurate since subsequent calls will carry different line numbers, so it is best to allocate a few bytes extra to be safe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flags</strong> (<em>int</em>) – A binary OR of items from the list of <a class="reference internal" href="#c.EM_LOG_CONSOLE" title="EM_LOG_CONSOLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_xxx</span></code></a> flags that specify printing options. The flags <a class="reference internal" href="#c.EM_LOG_CONSOLE" title="EM_LOG_CONSOLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_CONSOLE</span></code></a>, <a class="reference internal" href="#c.EM_LOG_WARN" title="EM_LOG_WARN"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_WARN</span></code></a> and <a class="reference internal" href="#c.EM_LOG_ERROR" title="EM_LOG_ERROR"><code class="xref c c-data docutils literal notranslate"><span class="pre">EM_LOG_ERROR</span></code></a> do not apply in this function and are ignored.</p></li>
<li><p><strong>out</strong> (<em>char*</em>) – A pointer to a memory region where the callstack string will be written to. The string outputted by this function will always be null-terminated.</p></li>
<li><p><strong>maxbytes</strong> (<em>int</em>) – The maximum number of bytes that this function can write to the memory pointed to by <code class="docutils literal notranslate"><span class="pre">out</span></code>. If there is not enough space, the output will be truncated (but always null-terminated).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of bytes written (not number of characters, so this will also include the terminating zero).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_preloaded_image_data">
char *<code class="sig-name descname">emscripten_get_preloaded_image_data</code><span class="sig-paren">(</span>const char<em> *path</em>, int<em> *w</em>, int<em> *h</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_preloaded_image_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets preloaded image data and the size of the image.</p>
<p>The function returns pointer to loaded image or NULL — the pointer should be <code class="docutils literal notranslate"><span class="pre">free()</span></code>’d. The width/height of the image are written to the <code class="docutils literal notranslate"><span class="pre">w</span></code> and <code class="docutils literal notranslate"><span class="pre">h</span></code> parameters if the data is valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>const char*</em>) – Full path/filename to the file containing the preloaded image.</p></li>
<li><p><strong>w</strong> (<em>int*</em>) – Width of the image (if data is valid).</p></li>
<li><p><strong>h</strong> (<em>int*</em>) – Height of the image (if data is valid).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pointer to the preloaded image or NULL.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>char*</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_get_preloaded_image_data_from_FILE">
char *<code class="sig-name descname">emscripten_get_preloaded_image_data_from_FILE</code><span class="sig-paren">(</span>FILE<em> *file</em>, int<em> *w</em>, int<em> *h</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_get_preloaded_image_data_from_FILE" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets preloaded image data from a C <code class="docutils literal notranslate"><span class="pre">FILE*</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>FILE*</em>) – The <code class="docutils literal notranslate"><span class="pre">FILE</span></code> containing the preloaded image.</p></li>
<li><p><strong>w</strong> (<em>int*</em>) – Width of the image (if data is valid).</p></li>
<li><p><strong>h</strong> (<em>int*</em>) – Height of the image (if data is valid).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pointer to the preloaded image or NULL.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>char*</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_print_double">
int <code class="sig-name descname">emscripten_print_double</code><span class="sig-paren">(</span>double<em> x</em>, char<em> *to</em>, signed<em> max</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_print_double" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a double as a string, including a null terminator. This is useful because JS engines have good support for printing out a double in a way that takes the least possible size, but preserves all the information in the double, i.e., it can then be parsed back in a perfectly reversible manner (snprintf etc. do not do so, sadly).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>double</em>) – The double.</p></li>
<li><p><strong>to</strong> (<em>char*</em>) – A pre-allocated buffer of sufficient size, or NULL if no output is requested (useful to get the necessary size).</p></li>
<li><p><strong>max</strong> (<em>signed</em>) – The maximum number of bytes that can be written to the output pointer ‘to’ (including the null terminator).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>The number of necessary bytes, not including the null terminator (actually written, if <code class="docutils literal notranslate"><span class="pre">to</span></code> is not NULL).</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="socket-event-registration">
<span id="emscripten-api-reference-sockets"></span><h2><a class="toc-backref" href="#id21">Socket event registration</a><a class="headerlink" href="#socket-event-registration" title="Permalink to this headline">¶</a></h2>
<p>The functions in this section register callback functions for receiving socket events. These events are analogous to <a class="reference external" href="https://developer.mozilla.org/en/docs/WebSockets">WebSocket</a> events but are emitted <em>after</em> the internal Emscripten socket processing has occurred. This means, for example, that the message callback will be triggered after the data has been added to the <em>recv_queue</em>, so that an application receiving this callback can simply read the data using the file descriptor passed as a parameter to the callback. All of the callbacks are passed a file descriptor (<code class="docutils literal notranslate"><span class="pre">fd</span></code>) representing the socket that the notified activity took place on. The error callback also takes an <code class="docutils literal notranslate"><span class="pre">int</span></code> representing the socket error number (<code class="docutils literal notranslate"><span class="pre">errno</span></code>) and a <code class="docutils literal notranslate"><span class="pre">char*</span></code> that represents the error message (<code class="docutils literal notranslate"><span class="pre">msg</span></code>).</p>
<p>Only a single callback function may be registered to handle any given event, so calling a given registration function more than once will cause the first callback to be replaced. Similarly, passing a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> callback function to any <code class="docutils literal notranslate"><span class="pre">emscripten_set_socket_*_callback</span></code> call will de-register the callback registered for that event.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">userData</span></code> pointer allows arbitrary data specified during event registration to be passed to the callback, this is particularly useful for passing <code class="docutils literal notranslate"><span class="pre">this</span></code> pointers around in Object Oriented code.</p>
<p>In addition to being able to register network callbacks from C it is also possible for native JavaScript code to directly use the underlying mechanism used to implement the callback registration. For example, the following code shows simple logging callbacks that are registered by default when <code class="docutils literal notranslate"><span class="pre">SOCKET_DEBUG</span></code> is enabled:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Module</span><span class="p">[</span><span class="s1">&#39;websocket&#39;</span><span class="p">][</span><span class="s1">&#39;on&#39;</span><span class="p">](</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Socket error &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">error</span><span class="p">);});</span><span class="w"></span>
<span class="nx">Module</span><span class="p">[</span><span class="s1">&#39;websocket&#39;</span><span class="p">][</span><span class="s1">&#39;on&#39;</span><span class="p">](</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">fd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Socket open fd = &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fd</span><span class="p">);});</span><span class="w"></span>
<span class="nx">Module</span><span class="p">[</span><span class="s1">&#39;websocket&#39;</span><span class="p">][</span><span class="s1">&#39;on&#39;</span><span class="p">](</span><span class="s1">&#39;listen&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">fd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Socket listen fd = &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fd</span><span class="p">);});</span><span class="w"></span>
<span class="nx">Module</span><span class="p">[</span><span class="s1">&#39;websocket&#39;</span><span class="p">][</span><span class="s1">&#39;on&#39;</span><span class="p">](</span><span class="s1">&#39;connection&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">fd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Socket connection fd = &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fd</span><span class="p">);});</span><span class="w"></span>
<span class="nx">Module</span><span class="p">[</span><span class="s1">&#39;websocket&#39;</span><span class="p">][</span><span class="s1">&#39;on&#39;</span><span class="p">](</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">fd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Socket message fd = &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fd</span><span class="p">);});</span><span class="w"></span>
<span class="nx">Module</span><span class="p">[</span><span class="s1">&#39;websocket&#39;</span><span class="p">][</span><span class="s1">&#39;on&#39;</span><span class="p">](</span><span class="s1">&#39;close&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">fd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Socket close fd = &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fd</span><span class="p">);});</span><span class="w"></span>
</pre></div>
</div>
<p>Most of the JavaScript callback functions above get passed the file descriptor of the socket that triggered the callback, the on error callback however gets passed an <em>array</em> that contains the file descriptor, the error code and an error message.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The underlying JavaScript implementation doesn’t pass <code class="docutils literal notranslate"><span class="pre">userData</span></code>. This is mostly of use to C/C++ code and the <code class="docutils literal notranslate"><span class="pre">emscripten_set_socket_*_callback</span></code> calls simply create a closure containing the <code class="docutils literal notranslate"><span class="pre">userData</span></code> and pass that as the callback to the underlying JavaScript event registration mechanism.</p>
</div>
<section id="callback-functions">
<h3>Callback functions<a class="headerlink" href="#callback-functions" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="c.em_socket_callback">
<code class="sig-name descname">em_socket_callback</code><a class="headerlink" href="#c.em_socket_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer for <a class="reference internal" href="#c.emscripten_set_socket_open_callback" title="emscripten_set_socket_open_callback"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_socket_open_callback()</span></code></a>, and the other socket functions (except <a class="reference internal" href="#c.emscripten_set_socket_error_callback" title="emscripten_set_socket_error_callback"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_socket_error_callback()</span></code></a>). This is defined as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">em_socket_callback</span><span class="p">)(</span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">userData</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fd</strong> (<em>int</em>) – The file descriptor of the socket that triggered the callback.</p></li>
<li><p><strong>userData</strong> (<em>void*</em>) – The <code class="docutils literal notranslate"><span class="pre">userData</span></code> originally passed to the event registration function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="type">
<dt id="c.em_socket_error_callback">
<code class="sig-name descname">em_socket_error_callback</code><a class="headerlink" href="#c.em_socket_error_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer for the <a class="reference internal" href="#c.emscripten_set_socket_error_callback" title="emscripten_set_socket_error_callback"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_set_socket_error_callback()</span></code></a>, defined as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">em_socket_error_callback</span><span class="p">)(</span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">err</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">userData</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fd</strong> (<em>int</em>) – The file descriptor of the socket that triggered the callback.</p></li>
<li><p><strong>err</strong> (<em>int</em>) – The code for the error that occurred.</p></li>
<li><p><strong>msg</strong> (<em>int</em>) – The message for the error that occurred.</p></li>
<li><p><strong>userData</strong> (<em>void*</em>) – The <code class="docutils literal notranslate"><span class="pre">userData</span></code> originally passed to the event registration function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="id9">
<h3>Functions<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_set_socket_error_callback">
void <code class="sig-name descname">emscripten_set_socket_error_callback</code><span class="sig-paren">(</span>void<em> *userData</em>, <a class="reference internal" href="#c.em_socket_error_callback" title="em_socket_error_callback">em_socket_error_callback</a><em> callback</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_socket_error_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Triggered by a <code class="docutils literal notranslate"><span class="pre">WebSocket</span></code> error.</p>
<p>See <a class="reference internal" href="#emscripten-api-reference-sockets"><span class="std std-ref">Socket event registration</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>userData</strong> (<em>void*</em>) – Arbitrary user data to be passed to the callback.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="#c.em_socket_error_callback" title="em_socket_error_callback"><em>em_socket_error_callback</em></a>) – Pointer to a callback function. The callback returns a file descriptor, error code and message, and the arbitrary <code class="docutils literal notranslate"><span class="pre">userData</span></code> passed to this function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_socket_open_callback">
void <code class="sig-name descname">emscripten_set_socket_open_callback</code><span class="sig-paren">(</span>void<em> *userData</em>, <a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback">em_socket_callback</a><em> callback</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_socket_open_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Triggered when the <code class="docutils literal notranslate"><span class="pre">WebSocket</span></code> has opened.</p>
<p>See <a class="reference internal" href="#emscripten-api-reference-sockets"><span class="std std-ref">Socket event registration</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>userData</strong> (<em>void*</em>) – Arbitrary user data to be passed to the callback.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback"><em>em_socket_callback</em></a>) – Pointer to a callback function. The callback returns a file descriptor and the arbitrary <code class="docutils literal notranslate"><span class="pre">userData</span></code> passed to this function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_socket_listen_callback">
void <code class="sig-name descname">emscripten_set_socket_listen_callback</code><span class="sig-paren">(</span>void<em> *userData</em>, <a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback">em_socket_callback</a><em> callback</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_socket_listen_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Triggered when <code class="docutils literal notranslate"><span class="pre">listen</span></code> has been called (synthetic event).</p>
<p>See <a class="reference internal" href="#emscripten-api-reference-sockets"><span class="std std-ref">Socket event registration</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>userData</strong> (<em>void*</em>) – Arbitrary user data to be passed to the callback.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback"><em>em_socket_callback</em></a>) – Pointer to a callback function. The callback returns a file descriptor and the arbitrary <code class="docutils literal notranslate"><span class="pre">userData</span></code> passed to this function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_socket_connection_callback">
void <code class="sig-name descname">emscripten_set_socket_connection_callback</code><span class="sig-paren">(</span>void<em> *userData</em>, <a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback">em_socket_callback</a><em> callback</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_socket_connection_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Triggered when the connection has been established.</p>
<p>See <a class="reference internal" href="#emscripten-api-reference-sockets"><span class="std std-ref">Socket event registration</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>userData</strong> (<em>void*</em>) – Arbitrary user data to be passed to the callback.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback"><em>em_socket_callback</em></a>) – Pointer to a callback function. The callback returns a file descriptor and the arbitrary <code class="docutils literal notranslate"><span class="pre">userData</span></code> passed to this function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_socket_message_callback">
void <code class="sig-name descname">emscripten_set_socket_message_callback</code><span class="sig-paren">(</span>void<em> *userData</em>, <a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback">em_socket_callback</a><em> callback</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_socket_message_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Triggered when data is available to be read from the socket.</p>
<p>See <a class="reference internal" href="#emscripten-api-reference-sockets"><span class="std std-ref">Socket event registration</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>userData</strong> (<em>void*</em>) – Arbitrary user data to be passed to the callback.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback"><em>em_socket_callback</em></a>) – Pointer to a callback function. The callback returns a file descriptor and the arbitrary <code class="docutils literal notranslate"><span class="pre">userData</span></code> passed to this function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_set_socket_close_callback">
void <code class="sig-name descname">emscripten_set_socket_close_callback</code><span class="sig-paren">(</span>void<em> *userData</em>, <a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback">em_socket_callback</a><em> callback</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_set_socket_close_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Triggered when the <code class="docutils literal notranslate"><span class="pre">WebSocket</span></code> has closed.</p>
<p>See <a class="reference internal" href="#emscripten-api-reference-sockets"><span class="std std-ref">Socket event registration</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>userData</strong> (<em>void*</em>) – Arbitrary user data to be passed to the callback.</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="#c.em_socket_callback" title="em_socket_callback"><em>em_socket_callback</em></a>) – Pointer to a callback function. The callback returns a file descriptor and the arbitrary <code class="docutils literal notranslate"><span class="pre">userData</span></code> passed to this function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="unaligned-types">
<h2><a class="toc-backref" href="#id22">Unaligned types</a><a class="headerlink" href="#unaligned-types" title="Permalink to this headline">¶</a></h2>
<section id="id10">
<h3>Typedefs<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="c.emscripten_align1_short">
<code class="sig-name descname">emscripten_align1_short</code><a class="headerlink" href="#c.emscripten_align1_short" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_align2_int">
<code class="sig-name descname">emscripten_align2_int</code><a class="headerlink" href="#c.emscripten_align2_int" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_align1_int">
<code class="sig-name descname">emscripten_align1_int</code><a class="headerlink" href="#c.emscripten_align1_int" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_align2_float">
<code class="sig-name descname">emscripten_align2_float</code><a class="headerlink" href="#c.emscripten_align2_float" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_align1_float">
<code class="sig-name descname">emscripten_align1_float</code><a class="headerlink" href="#c.emscripten_align1_float" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_align4_double">
<code class="sig-name descname">emscripten_align4_double</code><a class="headerlink" href="#c.emscripten_align4_double" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_align2_double">
<code class="sig-name descname">emscripten_align2_double</code><a class="headerlink" href="#c.emscripten_align2_double" title="Permalink to this definition">¶</a></dt>
<dt id="c.emscripten_align1_double">
<code class="sig-name descname">emscripten_align1_double</code><a class="headerlink" href="#c.emscripten_align1_double" title="Permalink to this definition">¶</a></dt>
<dd><p>Unaligned types. These may be used to force LLVM to emit unaligned loads/stores in places in your code where <a class="reference internal" href="../porting/Debugging.html#debugging-safe-heap"><span class="std std-ref">SAFE_HEAP</span></a> found an unaligned operation.</p>
<p>For usage examples see <a class="reference external" href="https://github.com/emscripten-core/emscripten/blob/main/test/core/test_set_align.c">test/core/test_set_align.c</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is better to avoid unaligned operations, but if you are reading from a packed stream of bytes or such, these types may be useful!</p>
</div>
</dd></dl>

</section>
</section>
<section id="pseudo-synchronous-functions">
<h2><a class="toc-backref" href="#id23">Pseudo-synchronous functions</a><a class="headerlink" href="#pseudo-synchronous-functions" title="Permalink to this headline">¶</a></h2>
<p>These functions require Asyncify (<code class="docutils literal notranslate"><span class="pre">-sASYNCIFY</span></code>). These functions are asynchronous but appear synchronous in C. See <a class="reference external" href="https://emscripten.org/docs/porting/asyncify.html">Asyncify</a> for more details.</p>
<section id="sleeping">
<h3>Sleeping<a class="headerlink" href="#sleeping" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_sleep">
void <code class="sig-name descname">emscripten_sleep</code><span class="sig-paren">(</span>unsigned int<em> ms</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Sleep for <cite>ms</cite> milliseconds. This is a normal “synchronous” sleep, which blocks all other operations while it runs. In other words, if
there are other async events waiting to happen, they will not happen during this sleep, which makes sense as conceptually this code is
on the stack (that’s how it looks in the C source code).</p>
</dd></dl>

</section>
<section id="network">
<h3>Network<a class="headerlink" href="#network" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_wget">
void <code class="sig-name descname">emscripten_wget</code><span class="sig-paren">(</span>const char*<em> url</em>, const char*<em> file</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_wget" title="Permalink to this definition">¶</a></dt>
<dd><p>Load file from url in <em>synchronously</em>. For the asynchronous version, see the <a class="reference internal" href="#c.emscripten_async_wget" title="emscripten_async_wget"><code class="xref c c-func docutils literal notranslate"><span class="pre">emscripten_async_wget()</span></code></a>.</p>
<p>In addition to fetching the URL from the network, preload plugins are executed so that the data is usable in <code class="docutils literal notranslate"><span class="pre">IMG_Load</span></code> and so forth (we synchronously do the work to make the browser decode the image or audio etc.).  See <a class="reference internal" href="../porting/files/packaging_files.html#preloading-files"><span class="std std-ref">Preloading files</span></a> for more information on preloading files.</p>
<p>This function is blocking; it won’t return until all operations are finished. You can then open and read the file if it succeeded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>char* url</strong> (<em>const</em>) – The URL to load.</p></li>
<li><p><strong>char* file</strong> (<em>const</em>) – The name of the file created and loaded from the URL. If the file already exists it will be overwritten. If the destination directory for the file does not exist on the filesystem, it will be created. A relative pathname may be passed, which will be interpreted relative to the current working directory at the time of the call to this function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">void emscripten_wget_data(const char* url, void** pbuffer, int* pnum, int *perror);</code></dt>
<dd><p>Synchronously fetches data off the network, and stores it to a buffer in memory, which is allocated for you. <strong>You must free the buffer, or it will leak!</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The URL to fetch from</p></li>
<li><p><strong>pbuffer</strong> – An out parameter that will be filled with a pointer to a buffer containing the data that is downloaded. This space has been malloced for you, <strong>and you must free it, or it will leak!</strong></p></li>
<li><p><strong>pnum</strong> – An out parameter that will be filled with the size of the downloaded data.</p></li>
<li><p><strong>perror</strong> – An out parameter that will be filled with a non-zero value if an error occurred.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="indexeddb">
<h3>IndexedDB<a class="headerlink" href="#indexeddb" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt>
<code class="sig-name descname">void emscripten_idb_load(const char *db_name, const char *file_id, void** pbuffer, int* pnum, int *perror);</code></dt>
<dd><p>Synchronously fetches data from IndexedDB, and stores it to a buffer in memory, which is allocated for you. <strong>You must free the buffer, or it will leak!</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> – The name of the database to load from</p></li>
<li><p><strong>file_id</strong> – The name of the file to load</p></li>
<li><p><strong>pbuffer</strong> – An out parameter that will be filled with a pointer to a buffer containing the data that is downloaded. This space has been malloced for you, <strong>and you must free it, or it will leak!</strong></p></li>
<li><p><strong>pnum</strong> – An out parameter that will be filled with the size of the downloaded data.</p></li>
<li><p><strong>perror</strong> – An out parameter that will be filled with a non-zero value if an error occurred.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">void emscripten_idb_store(const char *db_name, const char *file_id, void* buffer, int num, int *perror);</code></dt>
<dd><p>Synchronously stores data to IndexedDB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> – The name of the database to store to</p></li>
<li><p><strong>file_id</strong> – The name of the file to store</p></li>
<li><p><strong>buffer</strong> – A pointer to the data to store</p></li>
<li><p><strong>num</strong> – How many bytes to store</p></li>
<li><p><strong>perror</strong> – An out parameter that will be filled with a non-zero value if an error occurred.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">void emscripten_idb_delete(const char *db_name, const char *file_id, int *perror);</code></dt>
<dd><p>Synchronously deletes data from IndexedDB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> – The name of the database to delete from</p></li>
<li><p><strong>file_id</strong> – The name of the file to delete</p></li>
<li><p><strong>perror</strong> – An out parameter that will be filled with a non-zero value if an error occurred.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">void emscripten_idb_exists(const char *db_name, const char *file_id, int* pexists, int *perror);</code></dt>
<dd><p>Synchronously checks if a file exists in IndexedDB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> – The name of the database to check in</p></li>
<li><p><strong>file_id</strong> – The name of the file to check</p></li>
<li><p><strong>pexists</strong> – An out parameter that will be filled with a non-zero value if the file exists in that database.</p></li>
<li><p><strong>perror</strong> – An out parameter that will be filled with a non-zero value if an error occurred.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="upstream-asyncify-functions">
<h2><a class="toc-backref" href="#id24">Upstream Asyncify functions</a><a class="headerlink" href="#upstream-asyncify-functions" title="Permalink to this headline">¶</a></h2>
<p>These functions only work with the upstream wasm backend when using Asyncify.</p>
<section id="id11">
<h3>Typedefs<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="c.em_scan_func">
<code class="sig-name descname">em_scan_func</code><a class="headerlink" href="#c.em_scan_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function pointer type for use in scan callbacks, receiving two pointers, for
the beginning and end of a range of memory. You can then scan that range.</p>
<p>Defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">em_scan_func</span><span class="p">)(</span><span class="n">void</span><span class="o">*</span><span class="p">,</span> <span class="n">void</span><span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="id12">
<h3>Functions<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.emscripten_scan_stack">
void <code class="sig-name descname">emscripten_scan_stack</code><span class="sig-paren">(</span><a class="reference internal" href="#c.em_scan_func" title="em_scan_func">em_scan_func</a><em> func</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_scan_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan the C userspace stack, which means the stack managed by the compiled
code (as opposed to the wasm VM’s internal stack, which is not directly
observable). This data is already in linear memory; this function just
gives you a simple way to know where it is.</p>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_scan_registers">
void <code class="sig-name descname">emscripten_scan_registers</code><span class="sig-paren">(</span><a class="reference internal" href="#c.em_scan_func" title="em_scan_func">em_scan_func</a><em> func</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_scan_registers" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan “registers”, by which we mean data that is not in memory. In wasm,
that means data stored in locals, including locals in functions higher up
the stack - the wasm VM has spilled them, but none of that is observable to
user code).</p>
<p>Note that this function scans wasm locals. Depending on the LLVM
optimization level, this may not scan the original locals in your source
code. For example in <code class="docutils literal notranslate"><span class="pre">-O0</span></code> locals may be stored on the stack. To make
sure you scan everything necessary, you can also do
<code class="docutils literal notranslate"><span class="pre">emscripten_scan_stack</span></code>.</p>
<p>This function requires Asyncify - it relies on that option to spill the
local state all the way up the stack. As a result, it will add overhead
to your program.</p>
</dd></dl>

<dl class="function">
<dt id="c.emscripten_lazy_load_code">
void <code class="sig-name descname">emscripten_lazy_load_code</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_lazy_load_code" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>This creates two wasm files at compile time: the first wasm which is
downloaded and run normally, and a second that is lazy-loaded. When an
<code class="docutils literal notranslate"><span class="pre">emscripten_lazy_load_code()</span></code> call is reached, we load the second wasm
and resume execution using it.</p>
<p>The idea here is that the initial download can be quite small, if you
place enough <code class="docutils literal notranslate"><span class="pre">emscripten_lazy_load_code()</span></code> calls in your codebase, as
the optimizer can remove code from the first wasm if it sees it can’t
be reached. The second downloaded wasm can contain your full codebase,
including rarely-used functions, in which case the lazy-loading may
not happen at all.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This requires building with <code class="docutils literal notranslate"><span class="pre">-sASYNCIFY_LAZY_LOAD_CODE</span></code>.</p>
</div>
</dd></dl>

</section>
</section>
<section id="abi-functions">
<h2><a class="toc-backref" href="#id25">ABI functions</a><a class="headerlink" href="#abi-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions are not declared in <code class="docutils literal notranslate"><span class="pre">emscripten.h</span></code>, but are used
internally in our system libraries. You may care about them if you replace the
Emscripten runtime JS code, or run Emscripten binaries in your own runtime.</p>
<dl class="function">
<dt id="c.emscripten_notify_memory_growth">
void <code class="sig-name descname">emscripten_notify_memory_growth</code><span class="sig-paren">(</span>i32<em> index</em><span class="sig-paren">)</span><a class="headerlink" href="#c.emscripten_notify_memory_growth" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when memory has grown. In a JS runtime, this is used to know when
to update the JS views on the wasm memory, which otherwise we would need
to constantly check for after any wasm code runs. See
<a class="reference external" href="https://github.com/WebAssembly/WASI/issues/82">this wasi discussion</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<em>i32</em>) – Which memory has grown.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="html5.h.html" class="btn btn-neutral float-right" title="html5.h"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="API Reference"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

     
  <!--begin hamishw addition -->
  
    
  
  <!--  -->
   
   <!--Footer important links
    If no such page exists then nav item is not created. CSS defines which of the long or short version is 
	displayed.   -->

	
   <div class="footer-nav-bar" style="">
     <div class="footer-options">
   
        
              <a class="footer-navlink-short" title="Report Bug" href="../getting_started/bug_reports.html">Report Bug</a><a class="footer-navlink-long" title="Report Bug" href="../getting_started/bug_reports.html">Report Bug</a>
        
              <a class="footer-navlink-short" title="Licensing" href="../introducing_emscripten/emscripten_license.html">Licensing</a><a class="footer-navlink-long" title="Licensing" href="../introducing_emscripten/emscripten_license.html">Licensing</a>
        
              <a class="footer-navlink-short" title="Contributing" href="../contributing/contributing.html">Contributing</a><a class="footer-navlink-long" title="Contributing" href="../contributing/contributing.html">Contributing</a>
         
		      <a class="footer-navlink-short external" href="https://groups.google.com/forum/#!forum/emscripten-discuss">Mailing list</a><a class="footer-navlink-long external" href="https://groups.google.com/forum/#!forum/emscripten-discuss">Mailing list</a>
         
		      <a class="footer-navlink-short external" href="https://github.com/emscripten-core/emscripten/wiki">Wiki</a><a class="footer-navlink-long external" href="https://github.com/emscripten-core/emscripten/wiki">Wiki</a>
        
              <a class="footer-navlink-short" title="Release notes" href="../introducing_emscripten/release_notes.html">Release notes</a><a class="footer-navlink-long" title="Release notes" href="../introducing_emscripten/release_notes.html">Release notes</a>
        
              <a class="footer-navlink-short" title="Blogs" href="../introducing_emscripten/community.html">Blogs</a><a class="footer-navlink-long" title="Blogs" href="../introducing_emscripten/community.html">Blogs</a>
        
              <a class="footer-navlink-short" title="Help" href="../introducing_emscripten/community.html">Help</a><a class="footer-navlink-long" title="Contact" href="../introducing_emscripten/community.html">Contact</a>
         
				
     </div>
	 
	
 
   </div>
  
    <!-- <div role="navigation" aria-label="breadcrumbs navigation">

  <div class="breadcrumb-box">
     <a class="breadcrumb-box-item" href="../../index.html">Home</a> 
      
          <a class="breadcrumb-box-item" href="index.html">&raquo;&nbsp;API Reference</a>
      
    <div class="breadcrumb-box-item">&raquo;&nbsp;emscripten.h</div>
  </div>
 
</div> -->
  
    <!-- <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a> --.
   <!--end hamishw addition -->
  
  
	  
<!-- end section moved here by hamishw -->
  <div role="contentinfo" class="copyright-box">
    <!-- section moved here by hamishw - needs tidying, which is why it is still in breadcrumbs mode --> 
  <ul class="wy-breadcrumbs">
      <li class="wy-breadcrumbs-aside">
        
      </li>

	  <li class="wy-breadcrumbs-aside">
         <a href="../site/about.html">About site</a>
      </li>
	  
	  <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/emscripten-core/emscripten/issues/new?title=Bug%20in%20page:emscripten.h%20&body=REPLACE%20THIS%20TEXT%20WITH%20BUG%20DESCRIPTION%20%0A%0AURL:%20../../docs/api_reference/emscripten.h&labels=bug">Page bug</a>
      </li>
  </ul>
  
    <p>
        <!-- &copy; Copyright 2015, . -->
		&copy; Copyright 2015,  <a href="../contributing/AUTHORS.html">Emscripten Contributors</a>.
		<!-- update theme to remove the translation stuff here - it was breaking due to link to AUTHORS file. This is a cludge to allow specific link to my authors file -->
    </p>
	
  </div>
  
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.1.32-git (dev)',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            LINK_SUFFIX: '.html'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   
</div>
</body>
</html>